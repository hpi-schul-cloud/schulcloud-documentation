"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[9654],{8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(6540);const o={},i=t.createContext(o);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:s},e.children)}},9391:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"topics/authorization/concept","title":"NestJS Authorization Module","description":"Objectives","source":"@site/docs/topics/authorization/concept.md","sourceDirName":"topics/authorization","slug":"/topics/authorization/concept","permalink":"/docs/topics/authorization/concept","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/topics/authorization/concept.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Authorization","permalink":"/docs/category/authorization"},"next":{"title":"BigBlueButton","permalink":"/docs/category/bigbluebutton"}}');var o=n(4848),i=n(8453);const r={},a="NestJS Authorization Module",l={},c=[{value:"Objectives",id:"objectives",level:2},{value:"Explanation of Terms",id:"explanation-of-terms",level:2},{value:"Permissions",id:"permissions",level:3},{value:"(Feature Flag Permissions)",id:"feature-flag-permissions",level:4},{value:"Roles",id:"roles",level:3},{value:"Entities",id:"entities",level:3},{value:"Domain Objects",id:"domain-objects",level:3},{value:"Scopes",id:"scopes",level:3},{value:"Scope Actions",id:"scope-actions",level:4},{value:"Scope Permission",id:"scope-permission",level:4},{value:"User(s)",id:"users",level:3},{value:"System Users",id:"system-users",level:4},{value:"Rules",id:"rules",level:2},{value:"User (Role) Permissions vs Scope Based Permissions",id:"user-role-permissions-vs-scope-based-permissions",level:2},{value:"How should you authorize an operation?",id:"how-should-you-authorize-an-operation",level:2},{value:"How to use authorization service?",id:"how-to-use-authorization-service",level:2},{value:"Example 1 - Execute a Single Operation",id:"example-1---execute-a-single-operation",level:3},{value:"Example 2 - Set Permission(s) of User as Required",id:"example-2---set-permissions-of-user-as-required",level:3},{value:"Example 4 - Define Context for Multiple Places",id:"example-4---define-context-for-multiple-places",level:3},{value:"How to use in our use cases",id:"how-to-use-in-our-use-cases",level:2},{value:"Example - Create a school by <strong>superhero</strong>",id:"example---create-a-school-by-superhero",level:3},{value:"Example - Create user by <strong>admin</strong>",id:"example---create-user-by-admin",level:3},{value:"Example - Edit course by <strong>admin</strong>",id:"example---edit-course-by-admin",level:3},{value:"Example - Create a Course",id:"example---create-a-course",level:3},{value:"Example - Create a Lesson",id:"example---create-a-lesson",level:3},{value:"How to write a rule",id:"how-to-write-a-rule",level:2},{value:"Structure of the Authorization Components",id:"structure-of-the-authorization-components",level:2},{value:"feathers-* (legacy/deprecated)",id:"feathers--legacydeprecated",level:3},{value:"Authorization Module",id:"authorization-module",level:3},{value:"Reference.loader",id:"referenceloader",level:3},{value:"authorization-context.builder",id:"authorization-contextbuilder",level:4},{value:"shared/domain/interface/*",id:"shareddomaininterface",level:3},{value:"rolename.enum",id:"rolenameenum",level:4},{value:"permission.enum",id:"permissionenum",level:4},{value:"Working other Internal MicroServices",id:"working-other-internal-microservices",level:2},{value:"Legacy Tech Stack FeatherJS Hooks",id:"legacy-tech-stack-featherjs-hooks",level:2},{value:"Desired Changes in Future",id:"desired-changes-in-future",level:2}];function h(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"nestjs-authorization-module",children:"NestJS Authorization Module"})}),"\n",(0,o.jsx)(s.h2,{id:"objectives",children:"Objectives"}),"\n",(0,o.jsx)(s.p,{children:"Breaking down complexity and isolate it.\nOne place to solve a specific authorization for a scope.\nOne implementation to handle all different situations in our system.\nIt should not be possible to use it in a wrong way."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"You should not need to understand the complete system, to know if something is authorized"}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"We also want to avoid any specific code for modules, collections, or something else, in the authorization module."}),"\n",(0,o.jsx)(s.h2,{id:"explanation-of-terms",children:"Explanation of Terms"}),"\n",(0,o.jsx)(s.h3,{id:"permissions",children:"Permissions"}),"\n",(0,o.jsx)(s.p,{children:'We have string-based permissions.\nFor examples check "enum Permission".\nIt includes all available permissions and is not separated by concerns or abstraction levels.\nThe permissions have different implicit scopes like instance, school, or named scope like team and course.'}),"\n",(0,o.jsx)(s.h4,{id:"feature-flag-permissions",children:"(Feature Flag Permissions)"}),"\n",(0,o.jsx)(s.p,{children:"Some of the permissions are used like feature flags. We want to separate and move these in the future.\nPlease keep that in mind, while becoming familiar with permissions."}),"\n",(0,o.jsx)(s.h3,{id:"roles",children:"Roles"}),"\n",(0,o.jsx)(s.p,{children:'We have a role collection, where each role has a permissions array that includes string-based permissions.\nRoles inherit permissions from the roles they have in their "roles" field.\nLike the "user" role, some of these roles are abstract and only used for inheritance.\nSome others are scope based with a prefix name like team*, or course*.'}),"\n",(0,o.jsx)(s.p,{children:'The "real" user roles by name are external person, student, teacher and administrator. All of these are in the school scope and the superhero is in the scope of an instance.'}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"In future we want to remove the inherit logic.\nWe want to add scope types to each role.\nAdd more technical users"}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"entities",children:"Entities"}),"\n",(0,o.jsx)(s.p,{children:"The entities are the representation of a single document of the collection, or the type.\nThey are used for authorization for now, but should be replaced by domain objects soon."}),"\n",(0,o.jsx)(s.h3,{id:"domain-objects",children:"Domain Objects"}),"\n",(0,o.jsx)(s.p,{children:"They are not really introduced. They should map between the repository layer and the domain."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"In future they are the base for authorization and the authorization service doesn't know anything about entities anymore."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"scopes",children:"Scopes"}),"\n",(0,o.jsx)(s.p,{children:"Everything what the system, or a user wants to do, is executed in a scope.\nA scope means an area like the complete instance, the school, the course, the user itself and so on.\nThe scopes are highly bound to the real domain objects that we have in our domain."}),"\n",(0,o.jsx)(s.h4,{id:"scope-actions",children:"Scope Actions"}),"\n",(0,o.jsx)(s.p,{children:'The permission for a base action, like they are defined in CRUD operations, is needed to execute something in a scope.\nThe most implicit action you ever need is the "read" action. That means, you must have the authorization to "read" the scope, otherwise it should not exist for you. :-)\nThe other possible action is to have write access to the scope.\nIt is a combination of delete, edit, create from CRUD side.'}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"From our current perspective, we need no differentiation.\nBut we force the implementation in a way, that allows us to add some more."}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"scope-permission",children:"Scope Permission"}),"\n",(0,o.jsx)(s.p,{children:"We have different situations where it is hard to say you can write/read to the domain scope.\nWe need the possibility to define different permissions for a single domain scope, or a single domain object itself."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Let say the user can edit his own user account, but we want to disallow that they can change his age.\nBut an administrator should have the authorization to do it."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"or another case."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"A student has limited permissions in a team, where he is only a member, but would have more permissions in a team, where he is the owner. So, at this point, we need to distinguish between instances of domain objects."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"users",children:"User(s)"}),"\n",(0,o.jsx)(s.p,{children:"In authorization scope it can be a system user, or a real user in our application.\nEach user has a role with permissions in the scope of the domain object they want to interact with.\nEach authorization requires a user."}),"\n",(0,o.jsx)(s.h4,{id:"system-users",children:"System Users"}),"\n",(0,o.jsx)(s.p,{children:"We have console operations, or operations based on API_KEYS that are used between internal services for already authorized operations like copy and copy files in file service.\nFor this we want to use system user and roles with own permissions."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"They are not introduced for now"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"rules",children:"Rules"}),"\n",(0,o.jsx)(s.p,{children:"The rules are implemented with a strategy pattern and are called from the authorization service.\nThe implementation should solve the authorization for a domain object based on the executed action.\nIt implements a check for which domain object, entity, or additional conditions should be used."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"The rule must validate our scope actions.\nWe highly recommend that every single operation and check in the rule is implemented as an additional method to keep the logic clean and moveable."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"user-role-permissions-vs-scope-based-permissions",children:"User (Role) Permissions vs Scope Based Permissions"}),"\n",(0,o.jsxs)(s.p,{children:["The permissions of the user come from his role.\nThese permissions have no explicit scope. But ",(0,o.jsx)(s.em,{children:"implicitly"})," the roles external person, student, teacher and administrator are in the school scope. The superhero is ",(0,o.jsx)(s.em,{children:"implicitly"}),' in the scope of the instance. On some instances external persons are "collected" in the "ExpertenSchule" - which is a unique school with a specialized type (SchoolPurpose.EXTERNAL_PERSON_SCHOOL) to provide instance wide - accounts for experts that may be invited to multiple schools.']}),"\n",(0,o.jsx)(s.p,{children:"It exists also scope based permissions. A user can have different (scope)roles in different (domain)scopes. For example, in teams where the student can have team member role in one team, or team administrator in another."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"In future we want to switch the implicit scope of the user role permissions to explicit scopes like in boards.\nAt the moment we must handle scope-, user- and system-user-permissions as separated special cases in our implementation.\nBy implementing user role permissions bound to scopes, we can do it in one way for all situations."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"how-should-you-authorize-an-operation",children:"How should you authorize an operation?"}),"\n",(0,o.jsxs)(s.p,{children:["Authorization must be handled in use cases (UC). They solve the authorization and ",(0,o.jsx)(s.em,{children:"orchestrate"})," the logic that should be done in services, or private methods.\nYou should never implement authorization on service level, to avoid different authorization steps.\nWhen calling other internal micro service for already authorized operations please use a queue based on RabbitMQ."]}),"\n",(0,o.jsx)(s.h2,{id:"how-to-use-authorization-service",children:"How to use authorization service?"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Please avoid to catch the errors of the authorization in UC.\nWe set empty array as required for passing permissions to make it visible that no string base permission is needed."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"example-1---execute-a-single-operation",children:"Example 1 - Execute a Single Operation"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-javascript",children:"   this.authorizationService.checkPermission(user, course, AuthorizationContextBuilder.write([])\n   // or\n   this.authorizationService.hasPermission(user, course, AuthorizationContextBuilder.write([])\n   // next orchestration steps\n"})}),"\n",(0,o.jsx)(s.h3,{id:"example-2---set-permissions-of-user-as-required",children:"Example 2 - Set Permission(s) of User as Required"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-javascript",children:"// Multiple permissions can be added. For a successful authorization, the user needs all of them.\nawait this.authorizationService.hasPermission(\n\tuserId,\n\tcourse,\n\tAuthorizationContextBuilder.read([Permissions.COURSE_VIEW])\n);\n// next orchestration steps\n"})}),"\n",(0,o.jsx)(s.h3,{id:"example-4---define-context-for-multiple-places",children:"Example 4 - Define Context for Multiple Places"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-javascript",children:"/** const **/\nexport const FileStorageAuthorizationContext = {\n\tcreate: AuthorizationContextBuilder.write([Permission.FILESTORAGE_CREATE]),\n\tread: AuthorizationContextBuilder.read([Permission.FILESTORAGE_VIEW]),\n\tupdate: AuthorizationContextBuilder.write([Permission.FILESTORAGE_EDIT]),\n\tdelete: AuthorizationContextBuilder.write([Permission.FILESTORAGE_REMOVE]),\n};\n\n/** UC **/\nthis.authorizationService.hasPermission(userId, course, PermissionContexts.create);\n// do other orchestration steps\n"})}),"\n",(0,o.jsx)(s.h2,{id:"how-to-use-in-our-use-cases",children:"How to use in our use cases"}),"\n",(0,o.jsxs)(s.h3,{id:"example---create-a-school-by-superhero",children:["Example - Create a school by ",(0,o.jsx)(s.strong,{children:"superhero"})]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"async createSchoolBySuperhero(userId: EntityId, params: { name: string }) {\n\n   const user = this.authorizationService.getUserWithPermissions(userId);\n   this.authorizationService.hasAllPermissions(user, [Permission.SCHOOL_CREATE]);\n\n   const school = new School(params);\n   await this.schoolService.save(school);\n\n   return true;\n}\n\n"})}),"\n",(0,o.jsxs)(s.h3,{id:"example---create-user-by-admin",children:["Example - Create user by ",(0,o.jsx)(s.strong,{children:"admin"})]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"\nasync createUserByAdmin(userId: EntityId, params: { email: string, firstName: string, lastName: string, schoolId: EntityId }) {\n\n   const user = this.authorizationService.getUserWithPermissions(userId);\n\n   const context = AuthorizationContextBuilder.write([Permission.INSTANCE, Permission.CREATE_USER])\n   await this.authorizationService.checkPermission(user, school, context);\n\n   const newUser = new User(params)\n   await this.userService.save(newUser);\n\n   return true;\n}\n\n"})}),"\n",(0,o.jsxs)(s.h3,{id:"example---edit-course-by-admin",children:["Example - Edit course by ",(0,o.jsx)(s.strong,{children:"admin"})]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"// admin\nasync editCourseByAdmin(userId: EntityId, params: { courseId: EntityId, description: string }) {\n\n   const course = this.courseService.getCourse(params.courseId);\n   const user = this.authorizationService.getUserWithPermissions(userId);\n   const school = course.school;\n\n   const context = AuthorizationContextBuilder.write([Permission.INSTANCE, Permission.CREATE_USER]);\n   this.authorizationService.checkPermissions(user, school, context);\n\n   course.description = params.description;\n   await this.courseService.save(course);\n\n   return true;\n}\n\n"})}),"\n",(0,o.jsx)(s.h3,{id:"example---create-a-course",children:"Example - Create a Course"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"// User can create a course in scope a school, you need to check if he can it by school\nasync createCourse(userId: EntityId, params: { schoolId: EntityId }) {\n   const user = this.authorizationService.getUserWithPermissions(userId);\n   const school = this.schoolService.getSchool(params.schoolId);\n\n   this.authorizationService.checkPermission(user, school\n       {\n         action: Actions.write,\n         requiredPermissions: [Permission.COURSE_CREATE],\n       }\n   );\n\n   const course = new Course({ school });\n   await this.courseService.saveCourse(course);\n\n   return course;\n}\n\n"})}),"\n",(0,o.jsx)(s.h3,{id:"example---create-a-lesson",children:"Example - Create a Lesson"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"// User can create a lesson to course, so you have a courseId\nasync createLesson(userId: EntityId, params: { courseId: EntityId }) {\n   const course = this.courseService.getCourse(params.courseId);\n   const user = this.authorizationService.getUserWithPermissions(userId);\n         // check authorization for user and course\n   this.authorizationService.checkPermission(user, course\n      {\n         action: Actions.write,\n         requiredPermissions: [Permission.COURSE_EDIT],\n      }\n   );\n\n   const lesson = new Lesson({course});\n   await this.lessonService.saveLesson(lesson);\n\n   return true;\n}\n"})}),"\n",(0,o.jsx)(s.h2,{id:"how-to-write-a-rule",children:"How to write a rule"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ts",children:"@Injectable()\nexport class TaskRule implements Rule<Task> {\n\tconstructor(\n\t\tprivate readonly authorizationHelper: AuthorizationHelper,\n        // Only if the rule has access to the rule.\n        // It dependece on dependency order.\n\t\tprivate readonly additionalRule: AdditionalRule, \n\t\tauthorisationInjectionService: AuthorizationInjectionService\n\t) {\n\t\tauthorisationInjectionService.injectAuthorizationRule(this);\n\t}\n\n\tpublic isApplicable(user: User, object: unknown): boolean {\n\t\tconst isMatched = object instanceof Task;\n\n\t\treturn isMatched;\n\t}\n\n\tpublic hasPermission(user: User, object: Task, context: AuthorizationContext): boolean {\n\t\t// ...\n\n\t\treturn result;\n\t}\n}\n"})}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"It is good practice to make read, write, or scopes explicit over different private methods!"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"structure-of-the-authorization-components",children:"Structure of the Authorization Components"}),"\n",(0,o.jsx)(s.h3,{id:"feathers--legacydeprecated",children:"feathers-* (legacy/deprecated)"}),"\n",(0,o.jsx)(s.p,{children:"It exists an adapter to call featherJS endpoints that solve authorizations."}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"This service is only used in news and should not be used in any other place.\nWe want to remove it completely."}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"authorization-module",children:"Authorization Module"}),"\n",(0,o.jsx)(s.p,{children:"The authorization module is the core of authorization. It collects all needed information and handles it behind a small interface. It exports the authorization service that can be used in your use case over injections."}),"\n",(0,o.jsx)(s.h3,{id:"referenceloader",children:"Reference.loader"}),"\n",(0,o.jsx)(s.p,{children:"It should be used only inside of the authorization module.\nIt is used to load registered resources by the id and name of the resource.\nThis is needed to solve the API requests from external services. (API implementation is missing for now)"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Please keep in mind that it can have an impact on the performance if you use it wrongly.\nWe keep it as a separate method to avoid the usage in areas where the domain object should exist, because we see the risk that a developer could be tempted by the ease of only passing the id."}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"authorization-contextbuilder",children:"authorization-context.builder"}),"\n",(0,o.jsx)(s.p,{children:'We export an authorization context builder to prepare the parameter for the authorization service called "authorization context".\nThis is optional and not required atm.\nBut it enables us to easily change the structure of the authorization context without touching many different places.'}),"\n",(0,o.jsx)(s.h3,{id:"shareddomaininterface",children:"shared/domain/interface/*"}),"\n",(0,o.jsx)(s.h4,{id:"rolenameenum",children:"rolename.enum"}),"\n",(0,o.jsx)(s.p,{children:"An enum that holds all available role names."}),"\n",(0,o.jsx)(s.h4,{id:"permissionenum",children:"permission.enum"}),"\n",(0,o.jsx)(s.p,{children:"An enum that holds all available permission names, however it's mixing all domain scopes atm."}),"\n",(0,o.jsx)(s.h2,{id:"working-other-internal-microservices",children:"Working other Internal MicroServices"}),"\n",(0,o.jsx)(s.p,{children:"We propose to use the infra-authorization-client module, a copy of them, or a similar implementation based on the open swagger api, to authorize requests for services that cannot authorize the operations."}),"\n",(0,o.jsx)(s.h2,{id:"legacy-tech-stack-featherjs-hooks",children:"Legacy Tech Stack FeatherJS Hooks"}),"\n",(0,o.jsx)(s.p,{children:"In featherJS all the authorization is done in hooks. Mostly before hooks and sometimes in after hooks.\nBefore and after means before, or after the database operation. For self-written services before, or after the call of the operation that should be executed.\nThey work similar to express middleware and bring their own request context."}),"\n",(0,o.jsx)(s.p,{children:"It exists hooks that can be used for all http(s) calls, or for specific type based on CRUD operations.\nAdditionally it also exists the find operations that are a http(s) GET requests without the ID of a specific element.\nEach function that adds to the hooks will be executed in order. Hooks for all methods first, then hooks for specific methods."}),"\n",(0,o.jsx)(s.p,{children:"Each hook exists for a featherJS service that exposes directly the api endpoints directly. Additional it exists a global hook pattern for the whole application."}),"\n",(0,o.jsxs)(s.p,{children:["Example: ",(0,o.jsx)(s.a,{href:"https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/src/services/lesson/hooks/index.js#L232",children:"hooks/index.js"})]}),"\n",(0,o.jsx)(s.h2,{id:"desired-changes-in-future",children:"Desired Changes in Future"}),"\n",(0,o.jsx)(s.p,{children:"Some small steps are done. But many next steps still exist.\nThey follow our general target."}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Implementation of Scope Based Permissions as a general solution instead of User Permissions that has only implicit school scopes for now.\nRemove populate logic in reference loader.\nSolve eager loading in course groups."}),"\n",(0,o.jsx)(s.li,{children:"Remove inheritance from roles, because we want to write it explicitly into the collection documents.\nMoving role api endpoints to NestJS.\nFixing of dashboard to handle roles in the right way as superhero."}),"\n",(0,o.jsx)(s.li,{children:"Switching entity-based authorization to domain objects based in steps."}),"\n",(0,o.jsx)(s.li,{children:"Cleanup of feature flags from user permissions.\nAdd existing feature flags to rules on places where it make sense."}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);