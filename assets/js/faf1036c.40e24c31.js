"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[8713],{8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}},9849:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"backend-design-patterns/domain-driven-design","title":"Domain Driven Design (DDD)","description":"What is DDD?","source":"@site/docs/backend-design-patterns/domain-driven-design.md","sourceDirName":"backend-design-patterns","slug":"/backend-design-patterns/domain-driven-design","permalink":"/docs/backend-design-patterns/domain-driven-design","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/backend-design-patterns/domain-driven-design.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Software Architecture","permalink":"/docs/backend-design-patterns/architecture"},"next":{"title":"Frontend Design Patterns","permalink":"/docs/category/frontend-design-patterns"}}');var s=t(4848),r=t(8453);const c={},o="Domain Driven Design (DDD)",a={},l=[{value:"What is DDD?",id:"what-is-ddd",level:2},{value:"Why we want to use it in our project",id:"why-we-want-to-use-it-in-our-project",level:2},{value:"DDD Types",id:"ddd-types",level:2},{value:"Entity (Domain Object)",id:"entity-domain-object",level:3},{value:"How to Use Domain Objects in our code",id:"how-to-use-domain-objects-in-our-code",level:4},{value:"Note",id:"note",level:4},{value:"Value Object",id:"value-object",level:3},{value:"How to Use Value Objects in our code",id:"how-to-use-value-objects-in-our-code",level:4},{value:"<strong>Example Usage</strong>",id:"example-usage",level:3},{value:"<strong>Best Practices</strong>",id:"best-practices",level:4},{value:"<strong>Summary Table</strong>",id:"summary-table",level:4},{value:"Aggregrate",id:"aggregrate",level:3},{value:"Domain Event",id:"domain-event",level:3}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"domain-driven-design-ddd",children:"Domain Driven Design (DDD)"})}),"\n",(0,s.jsx)(n.h2,{id:"what-is-ddd",children:"What is DDD?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://martinfowler.com/bliki/DomainDrivenDesign.html",children:"https://martinfowler.com/bliki/DomainDrivenDesign.html"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"why-we-want-to-use-it-in-our-project",children:"Why we want to use it in our project"}),"\n",(0,s.jsx)(n.p,{children:"The SVS is a long runing software product. The developers, the contributed teams and also the goals change over the years.\nFor us it is very important to create expressive code that is self explaining.\nThat every developer to every time can fast understand part of the code and can easy refactor the code."}),"\n",(0,s.jsx)(n.p,{children:"This include a lot more then only DDD, but DDD support us that the DDD layer, the core of our application, ridge this goal."}),"\n",(0,s.jsx)(n.h2,{id:"ddd-types",children:"DDD Types"}),"\n",(0,s.jsxs)(n.p,{children:["[1] ",(0,s.jsx)(n.a,{href:"https://martinfowler.com/bliki/EvansClassification.html",children:"https://martinfowler.com/bliki/EvansClassification.html"})]}),"\n",(0,s.jsx)(n.h3,{id:"entity-domain-object",children:"Entity (Domain Object)"}),"\n",(0,s.jsx)(n.p,{children:"\"Objects that have a distinct identity that runs through time and different representations. You also hear these called 'reference objects'.\"[1]"}),"\n",(0,s.jsx)(n.h4,{id:"how-to-use-domain-objects-in-our-code",children:"How to Use Domain Objects in our code"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Encapsulate Domain Logic"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Place all business logic and rules that relate to the entity inside the Domain Object."}),"\n",(0,s.jsx)(n.li,{children:"Example: In FileRecord, methods like markForDelete, setName, isBlocked, etc., belong here because they represent business operations on a file record."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Immutability of Props"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The props object should only be mutated through methods that enforce business rules.\nAvoid direct mutation from outside the Domain Object."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Identity and Equality"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use the id property for identity comparison."}),"\n",(0,s.jsx)(n.li,{children:"Two Domain Objects with the same id represent the same conceptual entity, even if other properties differ."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interaction with Persistence"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use mappers (like FileRecordEntityMapper) to convert between persistence models (e.g., database entities) and Domain Objects."}),"\n",(0,s.jsx)(n.li,{children:"Never expose ORM entities directly to your business logic or API layers\u2014always use Domain Objects."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Aggregates and Value Objects"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Domain Objects can aggregate Value Objects (like FileRecordSecurityCheck), which encapsulate value-based concepts and validation."}),"\n",(0,s.jsx)(n.li,{children:"Use Value Objects for things like email addresses, money, or security checks, and Domain Objects for things with identity (like a file record)."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"note",children:"Note"}),"\n",(0,s.jsx)(n.p,{children:'In our backend code we use microORM as ORM for our database.\nThe datarecords from the microORM are marked as Entities from the framework it self. Therefore we had a decorator name and name conflict with the real DDD entity. We solve it by calling the DDD entities in our project "domain object".'}),"\n",(0,s.jsx)(n.h3,{id:"value-object",children:"Value Object"}),"\n",(0,s.jsx)(n.p,{children:'"Objects that matter only as the combination of their attributes. Two value objects with the same values for all their attributes are considered equal. I also describe value objects in P of EAA." [1]'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://martinfowler.com/bliki/ValueObject.html",children:"https://martinfowler.com/bliki/ValueObject.html"})}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"how-to-use-value-objects-in-our-code",children:"How to Use Value Objects in our code"}),"\n",(0,s.jsxs)(n.p,{children:["A Value Object is a small object that represents a descriptive aspect of the domain with no conceptual identity. It is defined only by its attributes (values), not by a unique ID. In our project, ",(0,s.jsx)(n.code,{children:"FileRecordSecurityCheck"})," is a good example."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Immutability"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Value Objects should be immutable. Once created, their properties should not change."}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"readonly"})," for all properties."]}),"\n",(0,s.jsxs)(n.li,{children:["If you need a new value, create a new instance (e.g., ",(0,s.jsx)(n.code,{children:"scanned()"})," returns a new ",(0,s.jsx)(n.code,{children:"FileRecordSecurityCheck"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Validation"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use class-validator decorators (e.g., ",(0,s.jsx)(n.code,{children:"@IsEnum"}),", ",(0,s.jsx)(n.code,{children:"@IsString"}),", ",(0,s.jsx)(n.code,{children:"@IsDate"}),") to ensure the Value Object is always valid."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"@ValueObject()"})," decorator in your project automatically validates on construction and throws if invalid."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Equality"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Two Value Objects with the same values are considered equal, regardless of instance."}),"\n",(0,s.jsxs)(n.li,{children:["You can implement an ",(0,s.jsx)(n.code,{children:"equals()"})," method if you need to compare Value Objects."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Encapsulation of Logic"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Put all logic that belongs to the value inside the Value Object (e.g., ",(0,s.jsx)(n.code,{children:"isBlocked()"}),", ",(0,s.jsx)(n.code,{children:"isPending()"}),", ",(0,s.jsx)(n.code,{children:"copy()"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Usage in Domain Objects"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use Value Objects as properties in your Domain Objects (e.g., ",(0,s.jsx)(n.code,{children:"FileRecord"})," has a ",(0,s.jsx)(n.code,{children:"FileRecordSecurityCheck"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Pass Value Objects around instead of primitive types for richer domain modeling and validation."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"example-usage",children:(0,s.jsx)(n.strong,{children:"Example Usage"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Creating a Value Object:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const securityCheck = new FileRecordSecurityCheck({\n  status: ScanStatus.PENDING,\n  reason: "not yet scanned",\n  updatedAt: new Date(),\n  requestToken: "some-uuid",\n});\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Value Object Methods:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'if (securityCheck.isBlocked()) {\n  // handle blocked file\n}\n\nconst newCheck = securityCheck.scanned(ScanStatus.VERIFIED, "checked and safe");\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using in Domain Object:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const fileRecord = new FileRecord(fileRecordProps, securityCheck);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"best-practices",children:(0,s.jsx)(n.strong,{children:"Best Practices"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Never expose setters or allow mutation after construction."})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always validate on construction"})," (your ",(0,s.jsx)(n.code,{children:"@ValueObject()"})," decorator does this)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use Value Objects for all domain concepts that are defined by their value, not identity"})," (e.g., Email, Money, SecurityCheck)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Write unit tests for Value Objects"})," to ensure validation and logic work as expected."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"summary-table",children:(0,s.jsx)(n.strong,{children:"Summary Table"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Use Case"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Representing a status"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"FileRecordSecurityCheck"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Validation"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"@IsEnum"}),", ",(0,s.jsx)(n.code,{children:"@IsString"}),", ",(0,s.jsx)(n.code,{children:"@IsDate"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Immutability"}),(0,s.jsxs)(n.td,{children:["All properties are ",(0,s.jsx)(n.code,{children:"readonly"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Domain Object property"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"FileRecord"})," has a ",(0,s.jsx)(n.code,{children:"FileRecordSecurityCheck"})]})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"In short:"}),(0,s.jsx)(n.br,{}),"\n","Use Value Objects to model concepts that are defined by their data, not by identity. Make them immutable, always valid, and encapsulate all related logic. Use them as building blocks inside your Domain Objects for a robust, expressive, and safe domain model."]}),"\n",(0,s.jsx)(n.h3,{id:"aggregrate",children:"Aggregrate"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://martinfowler.com/bliki/DDD_Aggregate.html",children:"https://martinfowler.com/bliki/DDD_Aggregate.html"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"domain-event",children:"Domain Event"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://martinfowler.com/eaaDev/DomainEvent.html",children:"https://martinfowler.com/eaaDev/DomainEvent.html"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-events-design-implementation",children:"https://learn.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-events-design-implementation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://devblogs.microsoft.com/cesardelatorre/domain-events-vs-integration-events-in-domain-driven-design-and-microservices-architectures/",children:"https://devblogs.microsoft.com/cesardelatorre/domain-events-vs-integration-events-in-domain-driven-design-and-microservices-architectures/"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.refactory-project.com/application-events-and-domain-events/",children:"https://www.refactory-project.com/application-events-and-domain-events/"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);