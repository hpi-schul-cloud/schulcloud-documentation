"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[912],{4493:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"topics/collabora/Local setup","title":"Local setup","description":"This guide describes how to set up Collabora for local development and testing.","source":"@site/docs/topics/collabora/Local setup.md","sourceDirName":"topics/collabora","slug":"/topics/collabora/Local setup","permalink":"/docs/topics/collabora/Local setup","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/topics/collabora/Local setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"How it works","permalink":"/docs/topics/collabora/How it works"},"next":{"title":"Technical details","permalink":"/docs/topics/collabora/Technical details"}}');var t=o(4848),s=o(8453);const l={},i="Local setup",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Steps",id:"steps",level:2},{value:"Additional",id:"additional",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"local-setup",children:"Local setup"})}),"\n",(0,t.jsx)(n.p,{children:"This guide describes how to set up Collabora for local development and testing."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Docker installed on your machine"}),"\n",(0,t.jsx)(n.li,{children:"Schulcloud server running locally"}),"\n",(0,t.jsx)(n.li,{children:"File Storage server running locally"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Clone the Collabora Docker image:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker pull collabora/code\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Start Collabora container:"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'docker run -t -d \\\n   --network host \\\n   -e "extra_params=--o:ssl.enable=false" \\\n   -e "domain=.*" \\\n   --name collabora \\\n   --restart unless-stopped \\\n   collabora/code\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Opening ",(0,t.jsx)(n.a,{href:"http://localhost:9980/",children:"http://localhost:9980/"})," in a browser afterwards should answer with status OK."]}),"\n",(0,t.jsxs)(n.p,{children:["On Mac DDEV machines with Docker Desktop running, please make sure that the feature ",(0,t.jsx)(n.em,{children:"network host"})," is activated in Settings > Ressources > Network."]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Open a document in Schulcloud:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Navigate to the column board. Add an office document."}),"\n",(0,t.jsx)(n.li,{children:"On click the document should open in the Collabora editor in your browser."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"additional",children:"Additional"}),"\n",(0,t.jsx)(n.p,{children:"Depending on your setup, it may be necessary to allow Collabora routing from the Docker environment to your FilesStorage.\nYou can use settings in Docker if you have, for example, Docker Desktop with a license. Alternatively, you can use nginx inside your Docker environment:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'touch ~/nginx.conf\nvim ~/nginx.conf\n\nevents {}\nhttp {\n    server {\n        listen 3000;\n        location / {\n            proxy_pass http://host.docker.internal:3000;\n        }\n    }\n}\n\n\ndocker run --detach --name nginx-proxy --network bridge --volume ~/nginx.conf:/etc/nginx/nginx.conf:ro nginx\ndocker run -t -d -p 9980:9980 -e "extra_params=--o:ssl.enable=false" --name collabora --network bridge collabora/code\n\n\ndocker start <container-name-oder-id>\ndocker logs -f <container-name-oder-id>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>i});var r=o(6540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);