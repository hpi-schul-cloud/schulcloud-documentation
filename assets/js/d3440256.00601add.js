"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[4111],{4280:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/h5p-img-003-d50cebc8ddfd27592203e256fb693ba8.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},8457:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"services/h5p/Local setup","title":"Local setup","description":"Introduction","source":"@site/docs/services/h5p/Local setup.md","sourceDirName":"services/h5p","slug":"/services/h5p/Local setup","permalink":"/docs/services/h5p/Local setup","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/services/h5p/Local setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"How it works","permalink":"/docs/services/h5p/How it works"},"next":{"title":"Tldraw Server","permalink":"/docs/category/tldraw-server"}}');var r=t(4848),s=t(8453);const o={},l="Local setup",a={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Steps",id:"steps",level:2},{value:"Setting up a local S3 storage",id:"setting-up-a-local-s3-storage",level:3},{value:"Configuring the local S3 storage",id:"configuring-the-local-s3-storage",level:3},{value:"Configuring h5p for the schulcloud-server",id:"configuring-h5p-for-the-schulcloud-server",level:3},{value:"Testing the h5p-library-management app",id:"testing-the-h5p-library-management-app",level:3},{value:"Setting up the h5p static files server",id:"setting-up-the-h5p-static-files-server",level:3},{value:"Testing the h5p-editor app",id:"testing-the-h5p-editor-app",level:3},{value:"Check that the h5p-staticfiles-server is running",id:"check-that-the-h5p-staticfiles-server-is-running",level:3},{value:"Start and test the h5p-editor",id:"start-and-test-the-h5p-editor",level:3},{value:"Troubleshooting setup problems",id:"troubleshooting-setup-problems",level:2},{value:"I cannot open the minio console (connection refused)",id:"i-cannot-open-the-minio-console-connection-refused",level:3},{value:"Socket hang up/network error when connecting to the API server of minio",id:"socket-hang-upnetwork-error-when-connecting-to-the-api-server-of-minio",level:3},{value:"Package validation failed while installing h5p-libraries",id:"package-validation-failed-while-installing-h5p-libraries",level:3},{value:"The library-management-app runs without error, but I see no library files installed in the bucket",id:"the-library-management-app-runs-without-error-but-i-see-no-library-files-installed-in-the-bucket",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"local-setup",children:"Local setup"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"This documentation is to help developers to setup the servers and dependencies required to implement and test h5p in boards.\nAt the end of the setup, you should be able to run and use the h5p-editor and h5p-library-management apps without any failures."}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker"}),"\n",(0,r.jsx)(n.li,{children:"Git"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,r.jsx)(n.h3,{id:"setting-up-a-local-s3-storage",children:"Setting up a local S3 storage"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If you already have a local S3 storage running, skip this step."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://min.io/docs/minio/container/index.html",children:"minio"})," will be run in docker for storing h5p contents and libraries locally.\nYou can start it with the following docker command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run \\\n  --name minioS3storage \\\n  -p 9000:9000 \\\n  -p 9001:9001 \\\n  -e "MINIO_ROOT_USER=miniouser" \\\n  -e "MINIO_ROOT_PASSWORD=miniouser" \\\n  quay.io/minio/minio server /data --console-address ":9001"\n'})}),"\n",(0,r.jsx)(n.p,{children:"If the ports 9000 or 9001 are not available for your local machine, then use (pay special attention to the ports here!):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run \\\n  --name minioS3storage \\\n  -p 9100:9000 \\\n  -p 9101:9001 \\\n  -e "MINIO_ROOT_USER=miniouser" \\\n  -e "MINIO_ROOT_PASSWORD=miniouser" \\\n  quay.io/minio/minio server /data --console-address ":9001"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Or if you have a docker-compose file, add the service and volume for minio:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"docker-compose.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",children:"services:\n  minio-s3-storage:\n    image: quay.io/minio/minio:latest\n    command: server /data --console-address \":9001\"\n    restart: always\n    ports:\n      - '9000:9000'\n      - '9001:9001'\n    environment:\n      - MINIO_ROOT_USER=miniouser\n      - MINIO_ROOT_PASSWORD=miniouser\n    volumes:\n      - 'minio:/data'\n \nvolumes:\n  minio:\n"})}),"\n",(0,r.jsx)(n.p,{children:"If the ports 9000 or 9001 are not available for your local machine, then use (pay special attention to the ports here!):"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"docker-compose.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",children:"services:\n  minio-s3-storage:\n    image: quay.io/minio/minio:latest\n    command: server /data --console-address \":9001\"\n    restart: always\n    ports:\n      - '9100:9000'\n      - '9101:9001'\n    environment:\n      - MINIO_ROOT_USER=miniouser\n      - MINIO_ROOT_PASSWORD=miniouser\n    volumes:\n      - 'minio:/data'\n \nvolumes:\n  minio:\n"})}),"\n",(0,r.jsxs)(n.p,{children:["See also: ",(0,r.jsx)(n.a,{href:"https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-LokalesFileSystem",children:"Local Project Setup"})]}),"\n",(0,r.jsx)(n.h3,{id:"configuring-the-local-s3-storage",children:"Configuring the local S3 storage"}),"\n",(0,r.jsxs)(n.p,{children:["Sign in via to your local s3 storage (minio via ",(0,r.jsx)(n.a,{href:"http://localhost:9001",children:"http://localhost:9001"})," or ",(0,r.jsx)(n.a,{href:"http://localhost:9101",children:"http://localhost:9101"})," with username: miniouser, pw: miniouser)."]}),"\n",(0,r.jsx)(n.p,{children:"If not yet done, create an access key pair. Make sure to store the access key secret well, as you cannot re-read it\nafter creation."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Minio-Create-Access-Keys",src:t(9914).A+"",width:"1865",height:"425"})}),"\n",(0,r.jsx)(n.p,{children:"Then, add two buckets for the h5p contents and libraries with the following names:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"h5p-content-bucket"}),"\n",(0,r.jsx)(n.li,{children:"h5p-library-bucket"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Minio-Create-Bucket",src:t(8897).A+"",width:"1882",height:"774"})}),"\n",(0,r.jsx)(n.p,{children:"You may also use any other names you prefer or even just use one bucket. If you do, make sure you adapt to the rest of\nthe steps correctly."}),"\n",(0,r.jsxs)(n.p,{children:["This is optional, you can also change the s3 region to ",(0,r.jsx)(n.strong,{children:"eu-central-1"}),". If you decided not to change the region, please\nnote that the default s3 region for minio is ",(0,r.jsx)(n.strong,{children:"us-east-1"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Minio-Configuration-Region",src:t(4280).A+"",width:"1875",height:"752"})}),"\n",(0,r.jsx)(n.h3,{id:"configuring-h5p-for-the-schulcloud-server",children:"Configuring h5p for the schulcloud-server"}),"\n",(0,r.jsx)(n.p,{children:"Several environment variables are needed for both the h5p-editor and h5p-library management to run. Add the following\nvariables to the local .env file"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:".env"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"H5P_EDITOR__S3_ENDPOINT=http://localhost:9000\nH5P_EDITOR__S3_REGION=eu-central-1\n \nH5P_EDITOR__S3_BUCKET_CONTENT=h5p-content-bucket\nH5P_EDITOR__S3_ACCESS_KEY_ID=<LOCAL_S3_KEY_ID>\nH5P_EDITOR__S3_SECRET_ACCESS_KEY=<LOCAL_S3_KEY_SECRET>\n \nH5P_EDITOR__S3_BUCKET_LIBRARIES=h5p-library-bucket\nH5P_EDITOR__LIBRARIES_S3_ACCESS_KEY_ID=<LOCAL_S3_KEY_ID>\nH5P_EDITOR__LIBRARIES_S3_SECRET_ACCESS_KEY=<LOCAL_S3_KEY_SECRET>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Make sure to adapt the values of the variables according to what you have."}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, you can also just change the values in the ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/development.json",children:"development.json"}),"\nfile. However, the development config file may not contain all the required fields. You will need to add the missing values\nto the file locally. Also, note that the values from the environment variables will override those in the development config file."]}),"\n",(0,r.jsx)(n.h3,{id:"testing-the-h5p-library-management-app",children:"Testing the h5p-library-management app"}),"\n",(0,r.jsxs)(n.p,{children:["At this point, you have nearly everything for the library management app. You just need to specific which libraries to\ninstall in the schulcloud-server ",(0,r.jsx)(n.code,{children:"config/h5p-libraries.yaml"}),". For example:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"h5p-libraries.yaml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"h5p_libraries:\n  - H5P.ArithmeticQuiz\n  - H5P.Chart\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/dof_app_deploy/blob/main/ansible/group_vars/all/misc.yml#L15",children:"misc.yml"})," in dof-app\nprovides a list of possible h5p libraries. After configuring the libraries, you can run the library management app with\nthe command (or via your IDE using the package.json):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run nest:start:h5p:library-management\n"})}),"\n",(0,r.jsx)(n.p,{children:"After the app had finished running, check in the h5p-library-bucket, if the library files are successfully installed."}),"\n",(0,r.jsxs)(n.p,{children:["You may run into problems while running the app, the ",(0,r.jsx)(n.a,{href:"#troubleshooting-setup-problems",children:"troubleshooting"})," below contains\ninformation to help you solve them."]}),"\n",(0,r.jsx)(n.p,{children:'If you remove any of the folders in the bucket, remember to remove the corresponding metadata from mongodb in the\n"h5p-library" collection!'}),"\n",(0,r.jsx)(n.h3,{id:"setting-up-the-h5p-static-files-server",children:"Setting up the h5p static files server"}),"\n",(0,r.jsxs)(n.p,{children:["To run the h5p-editor from lumi-education in the client, a static file server is needed.\nSee ",(0,r.jsx)(n.a,{href:"https://docs.lumi.education/usage/integrating#serving-static-h5p-core-files-for-the-client",children:"H5P-Nodejs-Library-Serving static H5P core files for the client"})]}),"\n",(0,r.jsxs)(n.p,{children:["Clone/pull the latest repo of the ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/h5p-staticfiles-server",children:"h5p-staticfiles-server"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/hpi-schul-cloud/h5p-staticfiles-server.git\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build with docker an image of the h5p-staticfiles-server:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ./h5p-staticfiles-server\ndocker build --network=host -t=h5p-staticfiles-server .\n"})}),"\n",(0,r.jsx)(n.p,{children:"The --network option is to avoid any possible problems regarding dns resolution which often occurs with docker in wsl.\nYou may remove it, if it does not affect you."}),"\n",(0,r.jsx)(n.p,{children:"Lastly, you can run the static files server:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -p 8080:8080 -d --name=h5p-staticfiles-server h5p-staticfiles-server\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or if you have a docker compose file. Add the following service:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"docker-compose.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"services:\n  h5p-staticfiles-server:\n    build:\n      context: .\n    image: h5p-staticfiles-server\n    restart: always\n    ports:\n      - '8080:8080'\n"})}),"\n",(0,r.jsx)(n.p,{children:'If the port 8080 is already in used, change the first "8080" to another valid port number. Do take note of this port number;\nit is important.'}),"\n",(0,r.jsx)(n.p,{children:"Open a browser and test that the static files server is working correctly with the following url:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://localhost:8080/ping",children:"http://localhost:8080/ping"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://localhost:8080/h5pstatics/editor/images/add.png",children:"http://localhost:8080/h5pstatics/editor/images/add.png"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'The first url should show you the text "pong", the second a picture of a green plus.'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"IMPORTANT"})," : Each time the h5p-staticfiles-server repo is updated, you will have to redo the steps here to make sure\nthe h5p-editor works properly."]}),"\n",(0,r.jsx)(n.h3,{id:"testing-the-h5p-editor-app",children:"Testing the h5p-editor app"}),"\n",(0,r.jsx)(n.p,{children:"Before starting the h5p-editor app, make sure to:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Run the latest schulcloud-server, -client and nuxt-client"})}),"\n",(0,r.jsxs)(n.p,{children:["Update or clone the latest version of the schulcloud-server, client and nuxt-client.\nSee: ",(0,r.jsx)(n.a,{href:"https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-InstallationinWindows",children:"Local Project Setup"})]}),"\n",(0,r.jsxs)(n.p,{children:['Enable the feature flag "FEATURE_COLUMN_BOARD_H5P_ENABLED" in the ',(0,r.jsx)(n.code,{children:".env"})," of the schulcloud-server"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:".env"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FEATURE_COLUMN_BOARD_H5P_ENABLED=true\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Run the file-storage app locally"})}),"\n",(0,r.jsx)(n.p,{children:"The file-storage app is located in the schulcloud-server repo. Before starting the file-storage, make sure to configure the file-storage app properly. The configurations are in the"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:".env"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"FILES_STORAGE__S3_ENDPOINT=http://localhost:9000\nFILES_STORAGE__S3_ACCESS_KEY_ID=<YOUR_LOCAL_S3_KEY_ID>\nFILES_STORAGE__S3_SECRET_ACCESS_KEY=<YOUR_LOCAL_S3_KEY_SECRET>\nFILES_STORAGE__S3_BUCKET=schulcloud\nFILES_STORAGE__S3_REGION=eu-central-1\n"})}),"\n",(0,r.jsxs)(n.p,{children:['Make sure that the s3 bucket "schulcloud" is created in the s3 storage (minio). This is not needed for the h5p editor to run, but to completely setup the file-storage app you will also need to add an entry into the "file-storage" collection. See ',(0,r.jsx)(n.a,{href:"https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-LokalesFileSystem",children:"Local Project Setup-Lokales File System"})]}),"\n",(0,r.jsx)(n.p,{children:"After configuring the file-storage app, you can run the app with the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run nest:start:files-storage\n"})}),"\n",(0,r.jsx)(n.h3,{id:"check-that-the-h5p-staticfiles-server-is-running",children:"Check that the h5p-staticfiles-server is running"}),"\n",(0,r.jsx)(n.p,{children:"This should already be done in the previous step."}),"\n",(0,r.jsxs)(n.p,{children:["If you changed the port number of the h5p-staticfiles-server, you will need to change it in the ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/nuxt-client/blob/main/config/webpack/dev-server-config.js#L45",children:"dev-server-config.js"})," of the nuxt-client as well"]}),"\n",(0,r.jsx)(n.h3,{id:"start-and-test-the-h5p-editor",children:"Start and test the h5p-editor"}),"\n",(0,r.jsx)(n.p,{children:"You can start the h5p-editor app via the command (or via package.json):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm run nest:start:h5p\n"})}),"\n",(0,r.jsx)(n.p,{children:"To test if the h5p-editor works:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Sign into your local instance of SVS as a teacher"}),"\n",(0,r.jsx)(n.li,{children:"Create a course & board"}),"\n",(0,r.jsx)(n.li,{children:"Create a h5p element"}),"\n",(0,r.jsx)(n.li,{children:"Click on the empty h5p element"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If everything works you should see a new window appear with the h5p-editor. The editor should contain the library you\ninstalled via the h5p-library-management app."}),"\n",(0,r.jsx)(n.p,{children:"You may further test if the library works by creating a content out of the library."}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-setup-problems",children:"Troubleshooting setup problems"}),"\n",(0,r.jsx)(n.p,{children:"This section lists several problems that may occur when setting up h5p locally and possible solutions to them."}),"\n",(0,r.jsx)(n.h3,{id:"i-cannot-open-the-minio-console-connection-refused",children:"I cannot open the minio console (connection refused)"}),"\n",(0,r.jsx)(n.p,{children:"Remove the docker container for minio, then run the minio container again."}),"\n",(0,r.jsx)(n.p,{children:"Check if the ports in your docker command/compose file are correct. If you change the 9001 port to another port number,\nthe port to access the minio console will change to the other port number!"}),"\n",(0,r.jsx)(n.h3,{id:"socket-hang-upnetwork-error-when-connecting-to-the-api-server-of-minio",children:"Socket hang up/network error when connecting to the API server of minio"}),"\n",(0,r.jsx)(n.p,{children:'If you are using docker in WSL, the problem could be that your apps (i.e. file-storage, h5p-library-management) than are run\nin the windows environment is unable to resolve the exact "localhost" ip address of the minio api server (usually localhost:9000).'}),"\n",(0,r.jsx)(n.p,{children:'A quick workaround for this is by replacing "localhost" in the H5P_EDITOR__S3_ENDPOINT with the aforementioned exact ip address.\nThis can be determined via the command:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wsl hostname -I\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:".env"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"H5P_EDITOR__S3_ENDPOINT=http://172.27.120.97:9000 # just an example\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You may be presented with multiple ip addresses. If this is the case, then you will need to find the correct one via try-and-error\n(replacing ",(0,r.jsx)(n.strong,{children:"localhost"})," with each address and re-rerunning the app until no error is thrown). This is just an assumption,\nbut the correct ip address seems to not end with XXX.XX.0.1."]}),"\n",(0,r.jsxs)(n.p,{children:["Another workaround is to run your apps in the wsl. The connection is then run in the wsl network, removing the need to resolve\n",(0,r.jsx)(n.strong,{children:"localhost"})," between the windows and wsl network."]}),"\n",(0,r.jsx)(n.p,{children:"The real solution to this is probably to configure the dns resolution between wsl and windows correctly. This is\nout of scope of this documentation and should be solved independently by yourself."}),"\n",(0,r.jsx)(n.h3,{id:"package-validation-failed-while-installing-h5p-libraries",children:"Package validation failed while installing h5p-libraries"}),"\n",(0,r.jsx)(n.p,{children:"This problem occurs when you start the h5p-library-management app and the h5p-libraries are not installed because of the following error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Error: package-validation-failed:api-version-unsupported (component: H5P.MarkTheWords-1.11, current: 1.24, required: 1.27)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The message is confusing, but it means that the @lumieducation/h5p-server version that is currently installed is incompatible\nwith the library (here above shown as component) you specified. The only solutions here are either install a compatible\nversion of ",(0,r.jsx)(n.code,{children:"@lumieducation/h5p-server"})," (usually by updating its version number in the package.json) or remove the incompatible\nlibrary from the ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/h5p-libraries.yaml",children:"schulcloud-server/config/h5p-libraries.yaml"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"the-library-management-app-runs-without-error-but-i-see-no-library-files-installed-in-the-bucket",children:"The library-management-app runs without error, but I see no library files installed in the bucket"}),"\n",(0,r.jsx)(n.p,{children:'The app does not read from s3 which files or folders already exist. It records an entry in the "h5p-library" collection\nfor each library that is installed. The s3 and the mongodb collection can naturally be not synced i.e. mongodb says\nlibrary A exists in the collection, but the files for library A does not exist in s3. So, the app did not install the files\nin s3. To solve this, you can either:'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'remove all library files and folders from s3 and clear the "h5p-library" collections, run the library-management app'}),"\n",(0,r.jsxs)(n.li,{children:["remove all the specified library in ",(0,r.jsx)(n.a,{href:"https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/h5p-libraries.yaml",children:"schulcloud-server/config/h5p-libraries.yaml"})," ,run the library-management app,"]}),"\n",(0,r.jsx)(n.li,{children:"add your list of libraries again, run the library-management app"}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8897:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/h5p-img-002-2034c947643a910af6c6e4006d530a62.png"},9914:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/h5p-img-001-7cbc12f846c164c84fc15b5f5bd5a134.png"}}]);