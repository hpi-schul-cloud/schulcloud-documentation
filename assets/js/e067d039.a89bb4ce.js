"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[993],{8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var a=n(6540);const o={},c=a.createContext(o);function s(e){const t=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(c.Provider,{value:t},e.children)}},9330:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"backend/Development/rocket-chat","title":"Rocket.Chat","description":"Start Mongodb","source":"@site/docs/backend/Development/rocket-chat.md","sourceDirName":"backend/Development","slug":"/backend/Development/rocket-chat","permalink":"/docs/backend/Development/rocket-chat","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/backend/Development/rocket-chat.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ErWIn-IDM (Keycloak)","permalink":"/docs/backend/Development/keycloak"},"next":{"title":"VSCode","permalink":"/docs/backend/Development/vs-code"}}');var o=n(4848),c=n(8453);const s={},l="Rocket.Chat",r={},d=[{value:"Start Mongodb",id:"start-mongodb",level:2},{value:"Start rocketChat",id:"start-rocketchat",level:2},{value:"ENVS",id:"envs",level:2},{value:"dBildungscloud Backend Server",id:"dbildungscloud-backend-server",level:3},{value:"dBildungscloud Legacy Client",id:"dbildungscloud-legacy-client",level:3}];function i(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"rocketchat",children:"Rocket.Chat"})}),"\n",(0,o.jsx)(t.h2,{id:"start-mongodb",children:"Start Mongodb"}),"\n",(0,o.jsx)(t.p,{children:"It makes sense for Rocket.Chat to launch its own mongodb in Docker. Reason for this is Rocket.Chat requires Mongodb as replicaSet setup."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"docker run --name rocket-chat-mongodb -m=256m -p27030:27017 -d docker.io/mongo --replSet rs0 --oplogSize 10\n"})}),"\n",(0,o.jsx)(t.p,{children:"Start mongoDB console and execute"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-mongodb",children:'rs.initiate({"_id" : "rs0", "members" : [{"_id" : 0, "host" : "localhost:27017"}]})\n'})}),"\n",(0,o.jsx)(t.h2,{id:"start-rocketchat",children:"Start rocketChat"}),"\n",(0,o.jsxs)(t.p,{children:["(check the latest settings ",(0,o.jsx)(t.a,{href:"https://github.com/hpi-schul-cloud/dof_app_deploy/blob/main/ansible/roles/rocketchat/templates/configmap.yml.j2#L9",children:"https://github.com/hpi-schul-cloud/dof_app_deploy/blob/main/ansible/roles/rocketchat/templates/configmap.yml.j2#L9"}),")"]}),"\n",(0,o.jsx)(t.p,{children:'Please not that the displayed //172.29.173.128 is the IP address of the mongoDB docker container.\nYou can get the ip over the command:  docker inspect rocket-chat-mongodb | grep "IPAddress" (dependent on our system)'}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"docker run\\\n        -e CREATE_TOKENS_FOR_USERS=true \\\n        -e MONGO_URL=mongodb://172.29.173.128:27030/rocketchat  \\\n        -e ADMIN_PASS=huhu  \\\n        -e API_Enable_Rate_Limiter_Limit_Calls_Default=255  \\\n        -e Accounts_iframe_enabled=true  \\\n        -e Accounts_iframe_url=http://localhost:4000/rocketChat/Iframe \\\n        -e Accounts_Iframe_api_url=http://localhost:4000/rocketChat/authGet \\\n        -e Accounts_AllowRealNameChange=false \\\n        -e Accounts_AllowUsernameChange=false \\\n        -e Accounts_AllowEmailChange=false \\\n        -e Accounts_AllowAnonymousRead=false \\\n        -e Accounts_Send_Email_When_Activating=false \\\n        -e Accounts_Send_Email_When_Deactivating=false \\\n        -e Accounts_UseDefaultBlockedDomainsList=false \\\n        -e Analytics_features_messages=false \\\n        -e Analytics_features_rooms=false \\\n        -e Analytics_features_users=false \\\n        -e Statistics_reporting=false \\\n        -e API_Enable_CORS=true \\\n        -e Discussion_enabled=false \\\n        -e FileUpload_Enabled=false \\\n        -e UI_Use_Real_Name=true \\\n        -e Threads_enabled=false \\\n        -e Accounts_SetDefaultAvatar=false \\\n        -e Iframe_Restrict_Access=false \\\n        -e Accounts_Iframe_api_method=GET \\\n        -e OVERWRITE_SETTING_Show_Setup_Wizard='completed' \\\n        -p 3000:3000 docker.io/rocketchat/rocket.chat:4.7.2\n"})}),"\n",(0,o.jsx)(t.h2,{id:"envs",children:"ENVS"}),"\n",(0,o.jsx)(t.p,{children:"You must also configure you server and legacy client application.\nUse the .env file in top of the project folders."}),"\n",(0,o.jsx)(t.h3,{id:"dbildungscloud-backend-server",children:"dBildungscloud Backend Server"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-env",children:'ROCKETCHAT_SERVICE_ENABLED=true\nROCKET_CHAT_URI="http://localhost:3000"\nROCKET_CHAT_ADMIN_USER=admin\nROCKET_CHAT_ADMIN_PASSWORD=huhu\n'})}),"\n",(0,o.jsx)(t.h3,{id:"dbildungscloud-legacy-client",children:"dBildungscloud Legacy Client"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-env",children:'ROCKETCHAT_SERVICE_ENABLED=true\nROCKET_CHAT_URI="http://localhost:3000"\n'})})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}}}]);