"use strict";(self.webpackChunkdataport_docusaurus=self.webpackChunkdataport_docusaurus||[]).push([[2746],{1884:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"backend/Coding-Guidelines/modules-submodules","title":"Implementation and usage of modules, submodule and barrel files in our project","description":"In this guide, we\'ll cover how to use modules, submodules and barrel files in our project. These concepts help you organize your code into separate files and directories, making it easier to manage and maintain.","source":"@site/docs/backend/Coding-Guidelines/modules-submodules.md","sourceDirName":"backend/Coding-Guidelines","slug":"/backend/Coding-Guidelines/modules-submodules","permalink":"/docs/backend/Coding-Guidelines/modules-submodules","draft":false,"unlisted":false,"editUrl":"https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/backend/Coding-Guidelines/modules-submodules.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Defining Entities","permalink":"/docs/backend/Coding-Guidelines/micro-orm"},"next":{"title":"Repositories","permalink":"/docs/backend/Coding-Guidelines/repositories"}}');var o=n(4848),r=n(8453);const i={},l="Implementation and usage of modules, submodule and barrel files in our project",t={},a=[{value:"Modules and Submodules",id:"modules-and-submodules",level:2},{value:"Barrel Files",id:"barrel-files",level:2},{value:"Dependencies between Modules",id:"dependencies-between-modules",level:2},{value:"Further Reading",id:"further-reading",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"implementation-and-usage-of-modules-submodule-and-barrel-files-in-our-project",children:"Implementation and usage of modules, submodule and barrel files in our project"})}),"\n",(0,o.jsx)(s.p,{children:"In this guide, we'll cover how to use modules, submodules and barrel files in our project. These concepts help you organize your code into separate files and directories, making it easier to manage and maintain."}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Module Structure",src:n(3128).A+"",width:"1467",height:"2429"})}),"\n",(0,o.jsx)(s.h2,{id:"modules-and-submodules",children:"Modules and Submodules"}),"\n",(0,o.jsxs)(s.p,{children:["In our project, modules are a way to create separate scopes. This means that interfaces, use cases, services, etc., declared in a module are not visible outside the module unless they are explicitly exported using the ",(0,o.jsx)(s.code,{children:"export"})," keyword. To import a module, you use the ",(0,o.jsx)(s.code,{children:"import"})," keyword followed by the module name. Here's an example:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"import { ModuleName } from '@modules/module-name';\n"})}),"\n",(0,o.jsx)(s.p,{children:"Submodules are modules that are part of a larger module. They should be used within the main module. If it is necessary to use parts of the submodule outside the main module, the main module should export this via its barrel file(index.ts):"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"// @modules/module-name/index.ts\nexport { SubmoduleServiceName } from './submodule-name/service.ts';\n"})}),"\n",(0,o.jsx)(s.h2,{id:"barrel-files",children:"Barrel Files"}),"\n",(0,o.jsx)(s.p,{children:"Barrel files are a way to rollup exports from several folders into a single convenient nest-module. The barrel itself is a module file that re-exports selected exports of other submodules."}),"\n",(0,o.jsx)(s.p,{children:"If you have several related service/interface files in a directory/module that should be publicly accessible, you can create a barrel file to export all these files from the main module again."}),"\n",(0,o.jsx)(s.p,{children:"Here's an example of a barrel file:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"// @modules/module-name/index.ts\nexport { PublicService } from './services/public-service.ts';\nexport { ServiceInterfaceA, InterfaceB } from './interfaces';\nexport { InterfaceC } from './submodule-name/interfaces';\n"})}),"\n",(0,o.jsxs)(s.p,{children:["!!! Please don't export everything from a module in the barrel file. Only export the public API of the module. This will make it easier to understand what the module provides and avoid unnecessary dependencies. And don't use wildcard exports like ",(0,o.jsx)(s.code,{children:"export * from './services'"})," in the barrel file."]}),"\n",(0,o.jsx)(s.p,{children:"And here's how you can import from the barrel:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:"// @modules/other-module-name/service.ts\nimport { PublicService, InterfaceOfModule, InterfaceOfSubmodule } from '@modules/module-name';\n"})}),"\n",(0,o.jsx)(s.h2,{id:"dependencies-between-modules",children:"Dependencies between Modules"}),"\n",(0,o.jsxs)(s.p,{children:["Our Modules are split into different areas, most importantly ",(0,o.jsx)(s.code,{children:"core"}),", ",(0,o.jsx)(s.code,{children:"infra"}),", and ",(0,o.jsx)(s.code,{children:"modules"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"modules"})," contains all of our domain modules, that handle aspects of our business logic. ",(0,o.jsx)(s.code,{children:"infra"})," contains mostly adapters to external system, generated clients, as well as purely technical modules. ",(0,o.jsx)(s.code,{children:"core"})," contains indispensible modules like errorhandling and logging, that are needed by almost every other module."]}),"\n",(0,o.jsxs)(s.p,{children:["Aside of these major areas, there is also ",(0,o.jsx)(s.code,{children:"testing"}),", which contains modules and code that are only needed to implement tests, as well as ",(0,o.jsx)(s.code,{children:"shared"}),", which still contains helpers and other things that are used by multiple modules. However ",(0,o.jsx)(s.code,{children:"shared"})," is considered depricated, and new code should not be added there."]}),"\n",(0,o.jsxs)(s.p,{children:["To avoid dependency cycles, we keep a strict hierarchy between these areas. ",(0,o.jsx)(s.code,{children:"shared"})," and ",(0,o.jsx)(s.code,{children:"testing"})," are not allowed to have any dependencies outside these areas. ",(0,o.jsx)(s.code,{children:"infra"})," and ",(0,o.jsx)(s.code,{children:"core"})," may use ",(0,o.jsx)(s.code,{children:"shared"})," and ",(0,o.jsx)(s.code,{children:"testing"}),", but never ",(0,o.jsx)(s.code,{children:"modules"}),". ",(0,o.jsx)(s.code,{children:"modules"})," are generally free to use other modules, but need to take special care to avoid cycles in their dependencies to other modules."]}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"apps"})," are our outermost layer of code, where the applications as a whole are assembled. Finally, our ",(0,o.jsx)(s.code,{children:"migrations"})," exist outside the rest of the code, but like the apps may make use of modules."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Module Structure",src:n(7669).A+"",width:"2569",height:"1512"})}),"\n",(0,o.jsx)(s.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/docs/backend/Coding-Guidelines/solving-dependency-cycles",children:"Handling Dependency Cycles"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/docs/backend/architecture",children:"Architecture"})}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},3128:(e,s,n)=>{n.d(s,{A:()=>d});const d=n.p+"assets/images/Modules-SubModules_background-ee7bbc61fe0516d52135b9c300bf0f83.svg"},7669:(e,s,n)=>{n.d(s,{A:()=>d});const d=n.p+"assets/images/server_area_dependency_v3-15cea05bd64a0b7a5458bbd2b7c95f8d.svg"},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var d=n(6540);const o={},r=d.createContext(o);function i(e){const s=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),d.createElement(r.Provider,{value:s},e.children)}}}]);