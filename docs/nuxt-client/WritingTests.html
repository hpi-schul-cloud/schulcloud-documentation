<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-nuxt-client/WritingTests" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Writing Tests | Schulcloud-Verbund-Software Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://documentation.dbildungscloud.dev/docs/nuxt-client/WritingTests"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Writing Tests | Schulcloud-Verbund-Software Documentation"><meta data-rh="true" name="description" content="How to write valuable, reliable tests, that are easy to maintain."><meta data-rh="true" property="og:description" content="How to write valuable, reliable tests, that are easy to maintain."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://documentation.dbildungscloud.dev/docs/nuxt-client/WritingTests"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/nuxt-client/WritingTests" hreflang="en"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/nuxt-client/WritingTests" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.bcdaadb3.css">
<link rel="preload" href="/assets/js/runtime~main.bb858abf.js" as="script">
<link rel="preload" href="/assets/js/main.7ae9bc98.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Schulcloud-Verbund-Software</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Schulcloud Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/nuxt-client">nuxt-client</a><button aria-label="Toggle the collapsible sidebar category &#x27;nuxt-client&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/GettingStarted">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/ProjectStructure">Project Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/CodeConventions">Code Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/GitConventions">Git Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/HowTo">How To</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/nuxt-client/WritingTests">Writing Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/Accessibility">Accessibility (A11y)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/Colors">Colors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/IdentifyingAndResolvingCircularDependencies">Identifying and Resolving Circular Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/HintsForWorking">Hints for Working</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/nuxt-client/ComponentGuidelines">Component Development Guidelines</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/schulcloud-client">schulcloud-client</a><button aria-label="Toggle the collapsible sidebar category &#x27;schulcloud-client&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/schulcloud-server">schulcloud-server</a><button aria-label="Toggle the collapsible sidebar category &#x27;schulcloud-server&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/e2e-system-tests">e2e-system-tests</a><button aria-label="Toggle the collapsible sidebar category &#x27;e2e-system-tests&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/how-to-update-the-docs">How to update the docs</a><button aria-label="Toggle the collapsible sidebar category &#x27;How to update the docs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Informations/detect-dependency-cycles">Informations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/services/etherpad/How it works">services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/syncronizations/TSP/Architecture">syncronizations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tldraw-server/How it works">tldraw-server</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/nuxt-client"><span itemprop="name">nuxt-client</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Writing Tests</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Writing Tests</h1><p>How to write valuable, reliable tests, that are easy to maintain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basics">Basics<a href="#basics" class="hash-link" aria-label="Direct link to Basics" title="Direct link to Basics">​</a></h2><p>Writing good tests that cover all aspects of your code, leads to:</p><ul><li><strong>confidence</strong>: to refactor your code</li><li><strong>higher code quality</strong>: as you review your code and identify problems when writing tests</li><li><strong>well documented code</strong>: as your tests describe how your code works</li></ul><p>and by that to:</p><ul><li><strong>developer happiness</strong> :-)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests-vs-component-tests">Unit-Tests vs. Component-Tests<a href="#unit-tests-vs-component-tests" class="hash-link" aria-label="Direct link to Unit-Tests vs. Component-Tests" title="Direct link to Unit-Tests vs. Component-Tests">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests">Unit-Tests<a href="#unit-tests" class="hash-link" aria-label="Direct link to Unit-Tests" title="Direct link to Unit-Tests">​</a></h4><p>Unit-Tests are <strong>WhiteBox-Tests</strong>. So they may use knowledge of internals of the code. They are well suited for testing e.g. <strong>composables</strong> and <strong>stores</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="component-tests">Component-Tests<a href="#component-tests" class="hash-link" aria-label="Direct link to Component-Tests" title="Direct link to Component-Tests">​</a></h4><p>Component-Tests are <strong>BlackBox-Tests</strong>. So they are not allowed to use any knowledge of the internals of the component.
They ensure the stability of the <strong>public interface</strong> of the component (aka its methods, props, events etc.).
The enable us to <strong>refactor</strong> the internals of our components later on.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="positive--negative-tests">Positive &amp; negative Tests<a href="#positive--negative-tests" class="hash-link" aria-label="Direct link to Positive &amp; negative Tests" title="Direct link to Positive &amp; negative Tests">​</a></h3><ul><li><strong>positive tests</strong> test the default cases of your code = <strong>how it should work</strong></li><li><strong>negative tests</strong> test <strong>error-cases</strong> or <strong>exception</strong>-behaviour</li><li>you need to write both to ensure your component works correctly</li><li>think of edge-cases that might break your component e.g. when providing input to the component:<ul><li><strong>numbers</strong>: high numbers, negative numbers, float&lt;-&gt;integer, at the edge of a range that is expected...</li><li><strong>dates</strong>: none existing dates e.g. 30th February 2023, far away future,...</li><li><strong>strings</strong>: umlauts, url-special-characters (?, &amp;, =, \/\/: ), very long strings for names, long strings without linebreaks</li><li><strong>totally incorrect data</strong>: e.g. giving a string instead of a number</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-vue-test-utils">Use Vue-Test-Utils<a href="#use-vue-test-utils" class="hash-link" aria-label="Direct link to Use Vue-Test-Utils" title="Direct link to Use Vue-Test-Utils">​</a></h3><p>For testing our Vue-Components we use the <strong>Vue Test Utils</strong>. Vue Test Utils is a library that provides methods to help you write tests for your Vue components. It provides methods to mount, shallow mount, and render components, as well as methods to simulate events and find elements in the rendered output.</p><p>Some functionality it provides:</p><ul><li><strong>mount()</strong>: create a wrapper around the component and instantiate it</li><li><strong>shallowMount()</strong>: create a shallow wrapper of the component being tested with childcomponents being mocked</li><li><strong>setMethods()</strong>: mock function on the component</li><li><strong>setProps()</strong>: set a specific set of props on the component</li><li><strong>findComponent()</strong>: finds a component by it&#x27;s class, name or ref</li><li><strong>findAllComponents()</strong>: finds all components by it&#x27;s class, name or ref</li><li><strong><a href="https://v1.test-utils.vuejs.org/api/wrapper/#find" target="_blank" rel="noopener noreferrer">find() / findAll()</a></strong>: search for html elements using html-selectors<ul><li><strong>deprecated for finding Components</strong></li><li>use findComponent() or findAllComponents() instead</li></ul></li><li><strong>setData()</strong>: set specific data on the component</li><li><strong>trigger()</strong> + <strong>emit()</strong>: test events and the flow of data</li></ul><p>We think the <strong>Vue Test Utils-documentation</strong> is a valuable resource for learning how to test Vue-Components and a very good starting point on how to test certain aspects of your component. Please have a look at <a href="https://test-utils.vuejs.org/guide" target="_blank" rel="noopener noreferrer">https://test-utils.vuejs.org/guide</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-typescript">Use TypeScript<a href="#use-typescript" class="hash-link" aria-label="Direct link to Use TypeScript" title="Direct link to Use TypeScript">​</a></h3><p>Use TypeScript for your components and for your unit-tests. This way many errors can be prevented early on, as you can detect them already in your IDE.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-your-tests-like-your-components">Name your tests like your components<a href="#name-your-tests-like-your-components" class="hash-link" aria-label="Direct link to Name your tests like your components" title="Direct link to Name your tests like your components">​</a></h3><p>Tests should be named after their Component using <strong>.unit.ts</strong> as the extension:</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HelloWorld.vue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HelloWorld.unit.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="structure-your-tests-using-multiple-describe-blocks">Structure your tests using (multiple) &quot;describe&quot;-blocks<a href="#structure-your-tests-using-multiple-describe-blocks" class="hash-link" aria-label="Direct link to Structure your tests using (multiple) &quot;describe&quot;-blocks" title="Direct link to Structure your tests using (multiple) &quot;describe&quot;-blocks">​</a></h3><p>Especially in large test-files it is very helpful for the reader to have a tree-like structure grouping the tests. So use describe blocks to group tests that are related to the same aspect of your code/the functionality.</p><ol><li>describe block that contains the filename in the root-level of the test-file</li><li>sub-describe-blocks for groups of tests focussing the same aspects of your code</li></ol><p><em>Example:</em></p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describe(&#x27;@components/share/ImportModal&#x27;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&#x27;when action button is clicked&#x27;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&quot;when backend returns an error&quot;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example taken from here <a href="https://www.youtube.com/watch?v=OIpfWTThrK8" target="_blank" rel="noopener noreferrer">Vue NYC - Component Tests with Vue.js - Matt O&#x27;Connell</a></p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">describe(&#x27;@components/something/AddButton&#x27;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&#x27;:props&#x27;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&#x27;:label - should render a button with the passed-in label text&#x27;, () =&gt; { ... })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&quot;@events&quot;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&#x27;@add - should emit an &quot;add&quot; event when the button is clicked&#x27;, () =&gt; { ... })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Hint</strong>: <em>maybe you should extract functionality from your component if this is needed e.g. to find a certain test in your file</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-the-test-like-a-sentence-it-should">Name the test like a sentence &quot;it should...&quot;<a href="#name-the-test-like-a-sentence-it-should" class="hash-link" aria-label="Direct link to Name the test like a sentence &quot;it should...&quot;" title="Direct link to Name the test like a sentence &quot;it should...&quot;">​</a></h3><p>There is a reason we use the it-alias for writing our code and not the test-method: we want to describe the aspect that is tested in a natural sentence. That&#x27;s why it is best practice to start your test with: it(&#x27;should ...&#x27;);</p><p><em>Example:</em></p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Bad:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&#x27;name changes on button click&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Good:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&#x27;should display the info text&#x27;, ... );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&#x27;should not render migration start button&#x27;, ... );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&#x27;should return the translation&#x27;, ... );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-testids">data-testids<a href="#data-testids" class="hash-link" aria-label="Direct link to data-testids" title="Direct link to data-testids">​</a></h3><p>Data-testids are attributes to HTML-elements that are solely used to enable tests to find and check a certain aspect of that tag (often to check the contained text against some expected value).</p><p>We decided to unify the way data-testid&#x27;s should be named in Frontend Arch Group: <a href="https://docs.dbildungscloud.de/x/mYHADQ" target="_blank" rel="noopener noreferrer">Meeting 2022-11-04</a></p><p>Please use <code>&lt;div ... data-testid=&quot;some-example&quot; ...&gt;</code> in your HTML-code if you want to define a data-testid.</p><ul><li>do not use uppercase-characters</li><li>only use one dash - right after data</li></ul><p>You can later on check this using:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// CopyResultModal.unit.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wrapper.find(&#x27;[data-testid=&quot;copy-result-notifications&quot;]&#x27;).text()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">).toContain(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wrapper.vm.$i18n.t(&quot;components.molecules.copyResult.fileCopy.error&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We also recommend to use refs instead of data-testids. But if you do that you ensure not to remove them once they are in the code... as they can be used in the component-code and for testing:</p><ul><li><a href="https://vuejs.org/guide/essentials/template-refs.html" target="_blank" rel="noopener noreferrer">VueJs - template refs</a></li><li><a href="https://v1.test-utils.vuejs.org/api/#ref" target="_blank" rel="noopener noreferrer">VueTestUtils - ref</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-methods">Setup-methods<a href="#setup-methods" class="hash-link" aria-label="Direct link to Setup-methods" title="Direct link to Setup-methods">​</a></h3><p>Separate your setup from your actual tests: If you need a more complex setup to test something - write a scope method called &quot;setup&quot; for it. Write it in a reusable and configurable way, in order to reuse most of it in several groups of tests. You will get small and easily readable tests and no redudant setup-code inside your tests that contains small differences that are hard to detect.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h3><p>Use the trigger()-method to simulate a events
<a href="https://v1.test-utils.vuejs.org/guides/#testing-key-mouse-and-other-dom-events" target="_blank" rel="noopener noreferrer">Testing Key, Mouse and other DOM events</a></p><ul><li><strong>Mouse-Click</strong>: <a href="https://v1.test-utils.vuejs.org/guides/#trigger-events" target="_blank" rel="noopener noreferrer">VueTestUtils - trigger events</a></li><li><strong>Keyboard-Input</strong>: <a href="https://v1.test-utils.vuejs.org/guides/#keyboard-example" target="_blank" rel="noopener noreferrer">VueTestUtils - keyboard example</a></li><li><strong>Drag &amp; Drop</strong>: trigger the events (e.g. dragstart, drop) and check for emitted events as reaction to that</li><li><strong>Event from a child component</strong>: <a href="https://v1.test-utils.vuejs.org/guides/#emitting-event-from-child-component" target="_blank" rel="noopener noreferrer">VueTestUtils - emitting from child component</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-asynchronous-behavior">Testing Asynchronous Behavior<a href="#testing-asynchronous-behavior" class="hash-link" aria-label="Direct link to Testing Asynchronous Behavior" title="Direct link to Testing Asynchronous Behavior">​</a></h3><p>You can test asynchronous behavior by using <strong><em>Vue.nextTick()</em></strong>:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">await Vue.nextTick();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>OR by <strong><em>trigger</em></strong>ing an effect and <strong><em>await</em></strong>ing this effect to take place:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const btnNext = wrapper.find(`[data-testid=&quot;dialog-next&quot;]`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await btnNext.trigger(&quot;click&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>see also</strong>: <a href="https://v1.test-utils.vuejs.org/guides/#testing-asynchronous-behavior" target="_blank" rel="noopener noreferrer">VueTestUtils - Testing Asynchronous Behavior</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="exceptions">Exceptions<a href="#exceptions" class="hash-link" aria-label="Direct link to Exceptions" title="Direct link to Exceptions">​</a></h3><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">await expect(() =&gt; copyModule.copy(payload)).rejects.toThrow(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `CopyProcess unknown type: ${payload.type}`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consoleerror">console.error<a href="#consoleerror" class="hash-link" aria-label="Direct link to console.error" title="Direct link to console.error">​</a></h3><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// UserMigration.page.unit.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const consoleErrorSpy = jest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .spyOn(console, &quot;error&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .mockImplementation();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect(consoleErrorSpy).toHaveBeenCalledWith(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect.any(ApplicationError)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">consoleErrorSpy.mockRestore();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-composables">Testing Composables<a href="#testing-composables" class="hash-link" aria-label="Direct link to Testing Composables" title="Direct link to Testing Composables">​</a></h3><ul><li><a href="https://test-utils.vuejs.org/guide/advanced/reusability-composition.html#testing-composables" target="_blank" rel="noopener noreferrer">VueTestUtils - Testing composables</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mocking">Mocking<a href="#mocking" class="hash-link" aria-label="Direct link to Mocking" title="Direct link to Mocking">​</a></h2><p>Replaces methods, instances of classes (e.g. stores) with some functionality, that e.g. simply returns a value you want to use in your test. By mocking you can easily simulate certain scenarios like failing requests or certain return values from any &quot;external&quot; (as in &quot;not part of the code i am currently testing&quot;) functionality.
Jest provides very helpful methods for that.
Examples from our codebase:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const mock = jest.fn().mockReturnValue(expectedTranslation);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">copyModuleMock.copyByShareToken = jest.fn()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .mockResolvedValue(copyResults);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>They can easily be tested like this:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">expect(copyModuleMock.copyByShareToken).toHaveBeenCalled();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or more specific like this:</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">expect(addFileMetaDataSpy).toHaveBeenCalledWith(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect.objectContaining&lt;FileMetaListResponse&gt;({ size: 2 } as FileMetaListResponse)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See also here: <a href="https://test-utils.vuejs.org/migration/" target="_blank" rel="noopener noreferrer">VueTestUtils mount - mocks and stubs are now in global</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-injections">Mocking injections<a href="#mocking-injections" class="hash-link" aria-label="Direct link to Mocking injections" title="Direct link to Mocking injections">​</a></h3><ul><li><a href="https://v1.test-utils.vuejs.org/guides/#mocking-injections" target="_blank" rel="noopener noreferrer">Vue.js - Mocking injections</a></li><li><a href="https://test-utils.vuejs.org/guide/advanced/reusability-composition.html#provide-inject" target="_blank" rel="noopener noreferrer">VueTestUtils - provide / inject</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-vuex-store">Mocking Vuex-Store<a href="#mocking-vuex-store" class="hash-link" aria-label="Direct link to Mocking Vuex-Store" title="Direct link to Mocking Vuex-Store">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-a-vuex-store-in-a-component">Mocking a vuex-store in a component<a href="#mocking-a-vuex-store-in-a-component" class="hash-link" aria-label="Direct link to Mocking a vuex-store in a component" title="Direct link to Mocking a vuex-store in a component">​</a></h4><p>Example file: <code>src/components/administration/AdminMigrationSection.unit.ts</code></p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { createModuleMocks } from &quot;@/utils/mock-store-module&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import YourModule from &quot;@/store/YourModule&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let yourModule: jest.Mocked&lt;YourModule&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schoolsModule = createModuleMocks(YourModule, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yourMethodName: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...yourGetters,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}) as jest.Mocked&lt;YourModule&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mount(YourComponentToBeTested, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...createComponentMocks({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    provide: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        yourModule,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect(yourModule.&lt;yourMethodName&gt;).toHaveBeenCalledWith(...);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-a-store">Testing a store<a href="#testing-a-store" class="hash-link" aria-label="Direct link to Testing a store" title="Direct link to Testing a store">​</a></h4><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import YourModule from &quot;./your-module&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const yourModule = new YourModule({});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// using `jest.spyOn()`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&quot;should call something&quot;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const yourActionNameMock = jest.spyOn(yourModule, &quot;yourActionName&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yourModule.yourActionName();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect(yourActionNameMock).toHaveBeenCalled();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// or using a method directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">it(&quot;should set something&quot;, () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    yourModule.setLoading(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect(yourModule.getLoading).toBe(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-pinia-stores">Mocking Pinia-Stores<a href="#mocking-pinia-stores" class="hash-link" aria-label="Direct link to Mocking Pinia-Stores" title="Direct link to Mocking Pinia-Stores">​</a></h3><p><strong>*{{ tbd }}</strong> (when Pinia-Stores are enabled for the project)*</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mocking-composables">Mocking Composables<a href="#mocking-composables" class="hash-link" aria-label="Direct link to Mocking Composables" title="Direct link to Mocking Composables">​</a></h3><p>Sometimes - if a composable is simple and does not create sideeffects - it is okay to use it in the tests and avoid mocking it.</p><p>That&#x27;s beneficial as it let&#x27;s us stick to the BlackBox-Idea: we should not know what the component is using internally.</p><p>If you need to mock a composable, you can simple do this like in the following example. You only have to ensure to return everything the composable returns... but mocked versions of it.</p><div class="language-TypeScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jest.spyOn(ourExampleComposable, &quot;useExample&quot;).mockReturnValue({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // return mocks of what the composable would have returned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="components-that-are-hard-to-test">Components that are hard to test<a href="#components-that-are-hard-to-test" class="hash-link" aria-label="Direct link to Components that are hard to test" title="Direct link to Components that are hard to test">​</a></h2><p>If you ever get into trouble to write good tests for your compents or code in general - this might be an indicator, that <strong>maybe your code is not structured good enough</strong>.</p><p>Consider:</p><ul><li>spliting your component into smaller sub-components with a small API</li><li>extracting functionality into one or mutliple composables</li><li>using an existing composable (from VueUse or an existing one in the project)</li><li>using an existing vuetify-component instead of writing it all yourself</li><li>reshaping the communication workflow (parameters, events, inject/provide, stores, composables)</li><li>(replacing a Vuex-store with a Pinia-store)</li></ul><p>For more details on how to write good components and how to split your components: have a look at this great article of Olli: (tbd)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-tests">End-To-End-Tests<a href="#end-to-end-tests" class="hash-link" aria-label="Direct link to End-To-End-Tests" title="Direct link to End-To-End-Tests">​</a></h2><p>(aka Integration/Acceptance/System-Tests)</p><p>End-to-End-Tests are developed in a seperate repository <a href="https://github.com/hpi-schul-cloud/end-to-end-tests" target="_blank" rel="noopener noreferrer">end-to-end-tests</a></p><p><a href="https://docs.dbildungscloud.de/x/tAgrCg" target="_blank" rel="noopener noreferrer">Documentation of e2e tests</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-coverage">Code-Coverage<a href="#code-coverage" class="hash-link" aria-label="Direct link to Code-Coverage" title="Direct link to Code-Coverage">​</a></h2><p>For monitoring our code-coverage we are using <a href="https://www.codacy.com" target="_blank" rel="noopener noreferrer">Codacy</a>. The current status can be seen on this <a href="https://app.codacy.com/gh/hpi-schul-cloud/nuxt-client/dashboard/" target="_blank" rel="noopener noreferrer">Dashboard</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/nuxt-client/5_WritingTests.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/nuxt-client/HowTo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How To</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/nuxt-client/Accessibility"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Accessibility (A11y)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basics" class="table-of-contents__link toc-highlight">Basics</a><ul><li><a href="#unit-tests-vs-component-tests" class="table-of-contents__link toc-highlight">Unit-Tests vs. Component-Tests</a></li><li><a href="#positive--negative-tests" class="table-of-contents__link toc-highlight">Positive &amp; negative Tests</a></li><li><a href="#use-vue-test-utils" class="table-of-contents__link toc-highlight">Use Vue-Test-Utils</a></li><li><a href="#use-typescript" class="table-of-contents__link toc-highlight">Use TypeScript</a></li><li><a href="#name-your-tests-like-your-components" class="table-of-contents__link toc-highlight">Name your tests like your components</a></li><li><a href="#structure-your-tests-using-multiple-describe-blocks" class="table-of-contents__link toc-highlight">Structure your tests using (multiple) &quot;describe&quot;-blocks</a></li><li><a href="#name-the-test-like-a-sentence-it-should" class="table-of-contents__link toc-highlight">Name the test like a sentence &quot;it should...&quot;</a></li><li><a href="#data-testids" class="table-of-contents__link toc-highlight">data-testids</a></li><li><a href="#setup-methods" class="table-of-contents__link toc-highlight">Setup-methods</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#testing-asynchronous-behavior" class="table-of-contents__link toc-highlight">Testing Asynchronous Behavior</a></li><li><a href="#exceptions" class="table-of-contents__link toc-highlight">Exceptions</a></li><li><a href="#consoleerror" class="table-of-contents__link toc-highlight">console.error</a></li><li><a href="#testing-composables" class="table-of-contents__link toc-highlight">Testing Composables</a></li></ul></li><li><a href="#mocking" class="table-of-contents__link toc-highlight">Mocking</a><ul><li><a href="#mocking-injections" class="table-of-contents__link toc-highlight">Mocking injections</a></li><li><a href="#mocking-vuex-store" class="table-of-contents__link toc-highlight">Mocking Vuex-Store</a></li><li><a href="#mocking-pinia-stores" class="table-of-contents__link toc-highlight">Mocking Pinia-Stores</a></li><li><a href="#mocking-composables" class="table-of-contents__link toc-highlight">Mocking Composables</a></li></ul></li><li><a href="#components-that-are-hard-to-test" class="table-of-contents__link toc-highlight">Components that are hard to test</a></li><li><a href="#end-to-end-tests" class="table-of-contents__link toc-highlight">End-To-End-Tests</a></li><li><a href="#code-coverage" class="table-of-contents__link toc-highlight">Code-Coverage</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-server<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/nuxt-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">nuxt-client<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-client<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/tldraw-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">tldraw-server<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/end-to-end-tests" target="_blank" rel="noopener noreferrer" class="footer__link-item">end-to-end-tests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.bb858abf.js"></script>
<script src="/assets/js/main.7ae9bc98.js"></script>
</body>
</html>