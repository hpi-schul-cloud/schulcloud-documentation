<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/h5p/Local setup" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Local setup | Schulcloud-Verbund-Software Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://documentation.dbildungscloud.dev/docs/services/h5p/Local setup"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Local setup | Schulcloud-Verbund-Software Documentation"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://documentation.dbildungscloud.dev/docs/services/h5p/Local setup"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/h5p/Local setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/h5p/Local setup" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Services","item":"https://documentation.dbildungscloud.dev/docs/category/services"},{"@type":"ListItem","position":2,"name":"H5P","item":"https://documentation.dbildungscloud.dev/docs/category/h5p"},{"@type":"ListItem","position":3,"name":"Local setup","item":"https://documentation.dbildungscloud.dev/docs/services/h5p/Local setup"}]}</script><link rel="stylesheet" href="/assets/css/styles.8215794b.css">
<script src="/assets/js/runtime~main.09242e2f.js" defer="defer"></script>
<script src="/assets/js/main.da2071bc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Schulcloud-Verbund-Software</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Schulcloud Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/backend">Backend</a><button aria-label="Expand sidebar category &#x27;Backend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/frontend">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/end-to-end-system-tests">End-to-end System Tests</a><button aria-label="Expand sidebar category &#x27;End-to-end System Tests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/services">Services</a><button aria-label="Collapse sidebar category &#x27;Services&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/nuxt-client">Nuxt Client</a><button aria-label="Expand sidebar category &#x27;Nuxt Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-server">Schulcloud Server</a><button aria-label="Expand sidebar category &#x27;Schulcloud Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-client">Schulcloud Client</a><button aria-label="Expand sidebar category &#x27;Schulcloud Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/etherpad">Etherpad</a><button aria-label="Expand sidebar category &#x27;Etherpad&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/files-storage">Files Storage</a><button aria-label="Expand sidebar category &#x27;Files Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/h5p">H5P</a><button aria-label="Collapse sidebar category &#x27;H5P&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/services/h5p/How it works">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/services/h5p/Local setup">Local setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/tldraw-server">Tldraw Server</a><button aria-label="Expand sidebar category &#x27;Tldraw Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/tsp-synchronisation">TSP Synchronisation</a><button aria-label="Expand sidebar category &#x27;TSP Synchronisation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/how-to-update-the-docs">How to update the docs</a><button aria-label="Expand sidebar category &#x27;How to update the docs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/services"><span>Services</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/h5p"><span>H5P</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Local setup</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Local setup</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>This documentation is to help developers to setup the servers and dependencies required to implement and test h5p in boards.
At the end of the setup, you should be able to run and use the h5p-editor and h5p-library-management apps without any failures.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<ul>
<li>Docker</li>
<li>Git</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-a-local-s3-storage">Setting up a local S3 storage<a href="#setting-up-a-local-s3-storage" class="hash-link" aria-label="Direct link to Setting up a local S3 storage" title="Direct link to Setting up a local S3 storage">​</a></h3>
<p><strong>If you already have a local S3 storage running, skip this step.</strong></p>
<p><a href="https://min.io/docs/minio/container/index.html" target="_blank" rel="noopener noreferrer">minio</a> will be run in docker for storing h5p contents and libraries locally.
You can start it with the following docker command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name minioS3storage \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 9000:9000 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 9001:9001 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -e &quot;MINIO_ROOT_USER=miniouser&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -e &quot;MINIO_ROOT_PASSWORD=miniouser&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  quay.io/minio/minio server /data --console-address &quot;:9001&quot;</span><br></span></code></pre></div></div>
<p>If the ports 9000 or 9001 are not available for your local machine, then use (pay special attention to the ports here!):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name minioS3storage \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 9100:9000 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p 9101:9001 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -e &quot;MINIO_ROOT_USER=miniouser&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -e &quot;MINIO_ROOT_PASSWORD=miniouser&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  quay.io/minio/minio server /data --console-address &quot;:9001&quot;</span><br></span></code></pre></div></div>
<p>Or if you have a docker-compose file, add the service and volume for minio:</p>
<p><strong>docker-compose.yml</strong></p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">minio-s3-storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> quay.io/minio/minio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> server /data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">address &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">9001&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;9000:9000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;9001:9001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> MINIO_ROOT_USER=miniouser</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> MINIO_ROOT_PASSWORD=miniouser</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;minio:/data&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  minio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><br></span></code></pre></div></div>
<p>If the ports 9000 or 9001 are not available for your local machine, then use (pay special attention to the ports here!):</p>
<p><strong>docker-compose.yml</strong></p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">minio-s3-storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> quay.io/minio/minio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> server /data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">address &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">9001&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;9100:9000&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;9101:9001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> MINIO_ROOT_USER=miniouser</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> MINIO_ROOT_PASSWORD=miniouser</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;minio:/data&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  minio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><br></span></code></pre></div></div>
<p>See also: <a href="https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-LokalesFileSystem" target="_blank" rel="noopener noreferrer">Local Project Setup</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-local-s3-storage">Configuring the local S3 storage<a href="#configuring-the-local-s3-storage" class="hash-link" aria-label="Direct link to Configuring the local S3 storage" title="Direct link to Configuring the local S3 storage">​</a></h3>
<p>Sign in via to your local s3 storage (minio via <a href="http://localhost:9001" target="_blank" rel="noopener noreferrer">http://localhost:9001</a> or <a href="http://localhost:9101" target="_blank" rel="noopener noreferrer">http://localhost:9101</a> with username: miniouser, pw: miniouser).</p>
<p>If not yet done, create an access key pair. Make sure to store the access key secret well, as you cannot re-read it
after creation.</p>
<p><img decoding="async" loading="lazy" alt="Minio-Create-Access-Keys" src="/assets/images/h5p-img-001-7cbc12f846c164c84fc15b5f5bd5a134.png" width="1865" height="425" class="img_ev3q"></p>
<p>Then, add two buckets for the h5p contents and libraries with the following names:</p>
<ul>
<li>h5p-content-bucket</li>
<li>h5p-library-bucket</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Minio-Create-Bucket" src="/assets/images/h5p-img-002-2034c947643a910af6c6e4006d530a62.png" width="1882" height="774" class="img_ev3q"></p>
<p>You may also use any other names you prefer or even just use one bucket. If you do, make sure you adapt to the rest of
the steps correctly.</p>
<p>This is optional, you can also change the s3 region to <strong>eu-central-1</strong>. If you decided not to change the region, please
note that the default s3 region for minio is <strong>us-east-1</strong>.</p>
<p><img decoding="async" loading="lazy" alt="Minio-Configuration-Region" src="/assets/images/h5p-img-003-d50cebc8ddfd27592203e256fb693ba8.png" width="1875" height="752" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-h5p-for-the-schulcloud-server">Configuring h5p for the schulcloud-server<a href="#configuring-h5p-for-the-schulcloud-server" class="hash-link" aria-label="Direct link to Configuring h5p for the schulcloud-server" title="Direct link to Configuring h5p for the schulcloud-server">​</a></h3>
<p>Several environment variables are needed for both the h5p-editor and h5p-library management to run. Add the following
variables to the local .env file</p>
<p><strong>.env</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_ENDPOINT=http://localhost:9000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_REGION=eu-central-1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_BUCKET_CONTENT=h5p-content-bucket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_ACCESS_KEY_ID=&lt;LOCAL_S3_KEY_ID&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_SECRET_ACCESS_KEY=&lt;LOCAL_S3_KEY_SECRET&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_BUCKET_LIBRARIES=h5p-library-bucket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__LIBRARIES_S3_ACCESS_KEY_ID=&lt;LOCAL_S3_KEY_ID&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__LIBRARIES_S3_SECRET_ACCESS_KEY=&lt;LOCAL_S3_KEY_SECRET&gt;</span><br></span></code></pre></div></div>
<p>Make sure to adapt the values of the variables according to what you have.</p>
<p>Alternatively, you can also just change the values in the <a href="https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/development.json" target="_blank" rel="noopener noreferrer">development.json</a>
file. However, the development config file may not contain all the required fields. You will need to add the missing values
to the file locally. Also, note that the values from the environment variables will override those in the development config file.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-h5p-library-management-app">Testing the h5p-library-management app<a href="#testing-the-h5p-library-management-app" class="hash-link" aria-label="Direct link to Testing the h5p-library-management app" title="Direct link to Testing the h5p-library-management app">​</a></h3>
<p>At this point, you have nearly everything for the library management app. You just need to specific which libraries to
install in the schulcloud-server <code>config/h5p-libraries.yaml</code>. For example:</p>
<p><strong>h5p-libraries.yaml</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">h5p_libraries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> H5P.ArithmeticQuiz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> H5P.Chart</span><br></span></code></pre></div></div>
<p>This <a href="https://github.com/hpi-schul-cloud/dof_app_deploy/blob/main/ansible/group_vars/all/misc.yml#L15" target="_blank" rel="noopener noreferrer">misc.yml</a> in dof-app
provides a list of possible h5p libraries. After configuring the libraries, you can run the library management app with
the command (or via your IDE using the package.json):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run nest:start:h5p:library-management</span><br></span></code></pre></div></div>
<p>After the app had finished running, check in the h5p-library-bucket, if the library files are successfully installed.</p>
<p>You may run into problems while running the app, the <a href="#troubleshooting-setup-problems">troubleshooting</a> below contains
information to help you solve them.</p>
<p>If you remove any of the folders in the bucket, remember to remove the corresponding metadata from mongodb in the
&quot;h5p-library&quot; collection!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-h5p-static-files-server">Setting up the h5p static files server<a href="#setting-up-the-h5p-static-files-server" class="hash-link" aria-label="Direct link to Setting up the h5p static files server" title="Direct link to Setting up the h5p static files server">​</a></h3>
<p>To run the h5p-editor from lumi-education in the client, a static file server is needed.
See <a href="https://docs.lumi.education/usage/integrating#serving-static-h5p-core-files-for-the-client" target="_blank" rel="noopener noreferrer">H5P-Nodejs-Library-Serving static H5P core files for the client</a></p>
<p>Clone/pull the latest repo of the <a href="https://github.com/hpi-schul-cloud/h5p-staticfiles-server" target="_blank" rel="noopener noreferrer">h5p-staticfiles-server</a></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/hpi-schul-cloud/h5p-staticfiles-server.git</span><br></span></code></pre></div></div>
<p>Build with docker an image of the h5p-staticfiles-server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd ./h5p-staticfiles-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker build --network=host -t=h5p-staticfiles-server .</span><br></span></code></pre></div></div>
<p>The --network option is to avoid any possible problems regarding dns resolution which often occurs with docker in wsl.
You may remove it, if it does not affect you.</p>
<p>Lastly, you can run the static files server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -p 8080:8080 -d --name=h5p-staticfiles-server h5p-staticfiles-server</span><br></span></code></pre></div></div>
<p>Or if you have a docker compose file. Add the following service:</p>
<p><strong>docker-compose.yml</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  h5p-staticfiles-server:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    build:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      context: .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: h5p-staticfiles-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &#x27;8080:8080&#x27;</span><br></span></code></pre></div></div>
<p>If the port 8080 is already in used, change the first &quot;8080&quot; to another valid port number. Do take note of this port number;
it is important.</p>
<p>Open a browser and test that the static files server is working correctly with the following url:</p>
<ul>
<li><a href="http://localhost:8080/ping" target="_blank" rel="noopener noreferrer">http://localhost:8080/ping</a></li>
<li><a href="http://localhost:8080/h5pstatics/editor/images/add.png" target="_blank" rel="noopener noreferrer">http://localhost:8080/h5pstatics/editor/images/add.png</a></li>
</ul>
<p>The first url should show you the text &quot;pong&quot;, the second a picture of a green plus.</p>
<p><strong>IMPORTANT</strong> : Each time the h5p-staticfiles-server repo is updated, you will have to redo the steps here to make sure
the h5p-editor works properly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-the-h5p-editor-app">Testing the h5p-editor app<a href="#testing-the-h5p-editor-app" class="hash-link" aria-label="Direct link to Testing the h5p-editor app" title="Direct link to Testing the h5p-editor app">​</a></h3>
<p>Before starting the h5p-editor app, make sure to:</p>
<p><strong>Run the latest schulcloud-server, -client and nuxt-client</strong></p>
<p>Update or clone the latest version of the schulcloud-server, client and nuxt-client.
See: <a href="https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-InstallationinWindows" target="_blank" rel="noopener noreferrer">Local Project Setup</a></p>
<p>Enable the feature flag &quot;FEATURE_COLUMN_BOARD_H5P_ENABLED&quot; in the <code>.env</code> of the schulcloud-server</p>
<p><strong>.env</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FEATURE_COLUMN_BOARD_H5P_ENABLED=true</span><br></span></code></pre></div></div>
<p><strong>Run the file-storage app locally</strong></p>
<p>The file-storage app is located in the schulcloud-server repo. Before starting the file-storage, make sure to configure the file-storage app properly. The configurations are in the</p>
<p><strong>.env</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILES_STORAGE__S3_ENDPOINT=http://localhost:9000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILES_STORAGE__S3_ACCESS_KEY_ID=&lt;YOUR_LOCAL_S3_KEY_ID&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILES_STORAGE__S3_SECRET_ACCESS_KEY=&lt;YOUR_LOCAL_S3_KEY_SECRET&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILES_STORAGE__S3_BUCKET=schulcloud</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FILES_STORAGE__S3_REGION=eu-central-1</span><br></span></code></pre></div></div>
<p>Make sure that the s3 bucket &quot;schulcloud&quot; is created in the s3 storage (minio). This is not needed for the h5p editor to run, but to completely setup the file-storage app you will also need to add an entry into the &quot;file-storage&quot; collection. See <a href="https://docs.dbildungscloud.de/pages/viewpage.action?pageId=203882620#LocalProjectSetup/Projektlokaleinrichten(WIP)-LokalesFileSystem" target="_blank" rel="noopener noreferrer">Local Project Setup-Lokales File System</a></p>
<p>After configuring the file-storage app, you can run the app with the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run nest:start:files-storage</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-that-the-h5p-staticfiles-server-is-running">Check that the h5p-staticfiles-server is running<a href="#check-that-the-h5p-staticfiles-server-is-running" class="hash-link" aria-label="Direct link to Check that the h5p-staticfiles-server is running" title="Direct link to Check that the h5p-staticfiles-server is running">​</a></h3>
<p>This should already be done in the previous step.</p>
<p>If you changed the port number of the h5p-staticfiles-server, you will need to change it in the <a href="https://github.com/hpi-schul-cloud/nuxt-client/blob/main/config/webpack/dev-server-config.js#L45" target="_blank" rel="noopener noreferrer">dev-server-config.js</a> of the nuxt-client as well</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-and-test-the-h5p-editor">Start and test the h5p-editor<a href="#start-and-test-the-h5p-editor" class="hash-link" aria-label="Direct link to Start and test the h5p-editor" title="Direct link to Start and test the h5p-editor">​</a></h3>
<p>You can start the h5p-editor app via the command (or via package.json):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run nest:start:h5p</span><br></span></code></pre></div></div>
<p>To test if the h5p-editor works:</p>
<ol>
<li>Sign into your local instance of SVS as a teacher</li>
<li>Create a course &amp; board</li>
<li>Create a h5p element</li>
<li>Click on the empty h5p element</li>
</ol>
<p>If everything works you should see a new window appear with the h5p-editor. The editor should contain the library you
installed via the h5p-library-management app.</p>
<p>You may further test if the library works by creating a content out of the library.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-setup-problems">Troubleshooting setup problems<a href="#troubleshooting-setup-problems" class="hash-link" aria-label="Direct link to Troubleshooting setup problems" title="Direct link to Troubleshooting setup problems">​</a></h2>
<p>This section lists several problems that may occur when setting up h5p locally and possible solutions to them.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="i-cannot-open-the-minio-console-connection-refused">I cannot open the minio console (connection refused)<a href="#i-cannot-open-the-minio-console-connection-refused" class="hash-link" aria-label="Direct link to I cannot open the minio console (connection refused)" title="Direct link to I cannot open the minio console (connection refused)">​</a></h3>
<p>Remove the docker container for minio, then run the minio container again.</p>
<p>Check if the ports in your docker command/compose file are correct. If you change the 9001 port to another port number,
the port to access the minio console will change to the other port number!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="socket-hang-upnetwork-error-when-connecting-to-the-api-server-of-minio">Socket hang up/network error when connecting to the API server of minio<a href="#socket-hang-upnetwork-error-when-connecting-to-the-api-server-of-minio" class="hash-link" aria-label="Direct link to Socket hang up/network error when connecting to the API server of minio" title="Direct link to Socket hang up/network error when connecting to the API server of minio">​</a></h3>
<p>If you are using docker in WSL, the problem could be that your apps (i.e. file-storage, h5p-library-management) than are run
in the windows environment is unable to resolve the exact &quot;localhost&quot; ip address of the minio api server (usually localhost:9000).</p>
<p>A quick workaround for this is by replacing &quot;localhost&quot; in the H5P_EDITOR__S3_ENDPOINT with the aforementioned exact ip address.
This can be determined via the command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wsl hostname -I</span><br></span></code></pre></div></div>
<p><strong>.env</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">H5P_EDITOR__S3_ENDPOINT=http://172.27.120.97:9000 # just an example</span><br></span></code></pre></div></div>
<p>You may be presented with multiple ip addresses. If this is the case, then you will need to find the correct one via try-and-error
(replacing <strong>localhost</strong> with each address and re-rerunning the app until no error is thrown). This is just an assumption,
but the correct ip address seems to not end with XXX.XX.0.1.</p>
<p>Another workaround is to run your apps in the wsl. The connection is then run in the wsl network, removing the need to resolve
<strong>localhost</strong> between the windows and wsl network.</p>
<p>The real solution to this is probably to configure the dns resolution between wsl and windows correctly. This is
out of scope of this documentation and should be solved independently by yourself.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-validation-failed-while-installing-h5p-libraries">Package validation failed while installing h5p-libraries<a href="#package-validation-failed-while-installing-h5p-libraries" class="hash-link" aria-label="Direct link to Package validation failed while installing h5p-libraries" title="Direct link to Package validation failed while installing h5p-libraries">​</a></h3>
<p>This problem occurs when you start the h5p-library-management app and the h5p-libraries are not installed because of the following error:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Error: package-validation-failed:api-version-unsupported (component: H5P.MarkTheWords-1.11, current: 1.24, required: 1.27)</span><br></span></code></pre></div></div>
<p>The message is confusing, but it means that the @lumieducation/h5p-server version that is currently installed is incompatible
with the library (here above shown as component) you specified. The only solutions here are either install a compatible
version of <code>@lumieducation/h5p-server</code> (usually by updating its version number in the package.json) or remove the incompatible
library from the <a href="https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/h5p-libraries.yaml" target="_blank" rel="noopener noreferrer">schulcloud-server/config/h5p-libraries.yaml</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-library-management-app-runs-without-error-but-i-see-no-library-files-installed-in-the-bucket">The library-management-app runs without error, but I see no library files installed in the bucket<a href="#the-library-management-app-runs-without-error-but-i-see-no-library-files-installed-in-the-bucket" class="hash-link" aria-label="Direct link to The library-management-app runs without error, but I see no library files installed in the bucket" title="Direct link to The library-management-app runs without error, but I see no library files installed in the bucket">​</a></h3>
<p>The app does not read from s3 which files or folders already exist. It records an entry in the &quot;h5p-library&quot; collection
for each library that is installed. The s3 and the mongodb collection can naturally be not synced i.e. mongodb says
library A exists in the collection, but the files for library A does not exist in s3. So, the app did not install the files
in s3. To solve this, you can either:</p>
<ul>
<li>remove all library files and folders from s3 and clear the &quot;h5p-library&quot; collections, run the library-management app</li>
<li>remove all the specified library in <a href="https://github.com/hpi-schul-cloud/schulcloud-server/blob/main/config/h5p-libraries.yaml" target="_blank" rel="noopener noreferrer">schulcloud-server/config/h5p-libraries.yaml</a> ,run the library-management app,</li>
<li>add your list of libraries again, run the library-management app</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/services/h5p/Local setup.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/services/h5p/How it works"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How it works</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/tldraw-server"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tldraw Server</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps</a><ul><li><a href="#setting-up-a-local-s3-storage" class="table-of-contents__link toc-highlight">Setting up a local S3 storage</a></li><li><a href="#configuring-the-local-s3-storage" class="table-of-contents__link toc-highlight">Configuring the local S3 storage</a></li><li><a href="#configuring-h5p-for-the-schulcloud-server" class="table-of-contents__link toc-highlight">Configuring h5p for the schulcloud-server</a></li><li><a href="#testing-the-h5p-library-management-app" class="table-of-contents__link toc-highlight">Testing the h5p-library-management app</a></li><li><a href="#setting-up-the-h5p-static-files-server" class="table-of-contents__link toc-highlight">Setting up the h5p static files server</a></li><li><a href="#testing-the-h5p-editor-app" class="table-of-contents__link toc-highlight">Testing the h5p-editor app</a></li><li><a href="#check-that-the-h5p-staticfiles-server-is-running" class="table-of-contents__link toc-highlight">Check that the h5p-staticfiles-server is running</a></li><li><a href="#start-and-test-the-h5p-editor" class="table-of-contents__link toc-highlight">Start and test the h5p-editor</a></li></ul></li><li><a href="#troubleshooting-setup-problems" class="table-of-contents__link toc-highlight">Troubleshooting setup problems</a><ul><li><a href="#i-cannot-open-the-minio-console-connection-refused" class="table-of-contents__link toc-highlight">I cannot open the minio console (connection refused)</a></li><li><a href="#socket-hang-upnetwork-error-when-connecting-to-the-api-server-of-minio" class="table-of-contents__link toc-highlight">Socket hang up/network error when connecting to the API server of minio</a></li><li><a href="#package-validation-failed-while-installing-h5p-libraries" class="table-of-contents__link toc-highlight">Package validation failed while installing h5p-libraries</a></li><li><a href="#the-library-management-app-runs-without-error-but-i-see-no-library-files-installed-in-the-bucket" class="table-of-contents__link toc-highlight">The library-management-app runs without error, but I see no library files installed in the bucket</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-server<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/nuxt-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">nuxt-client<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-client<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/tldraw-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">tldraw-server<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/end-to-end-tests" target="_blank" rel="noopener noreferrer" class="footer__link-item">end-to-end-tests<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>