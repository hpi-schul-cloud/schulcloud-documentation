<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/etherpad/How it works" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">How it works | Schulcloud-Verbund-Software Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://documentation.dbildungscloud.dev/docs/services/etherpad/How it works"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How it works | Schulcloud-Verbund-Software Documentation"><meta data-rh="true" name="description" content="Configuration"><meta data-rh="true" property="og:description" content="Configuration"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://documentation.dbildungscloud.dev/docs/services/etherpad/How it works"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/etherpad/How it works" hreflang="en"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/etherpad/How it works" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Services","item":"https://documentation.dbildungscloud.dev/docs/category/services"},{"@type":"ListItem","position":2,"name":"Etherpad","item":"https://documentation.dbildungscloud.dev/docs/category/etherpad"},{"@type":"ListItem","position":3,"name":"How it works","item":"https://documentation.dbildungscloud.dev/docs/services/etherpad/How it works"}]}</script><link rel="stylesheet" href="/assets/css/styles.021e6142.css">
<script src="/assets/js/runtime~main.c237fdc8.js" defer="defer"></script>
<script src="/assets/js/main.cb567a72.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Schulcloud-Verbund-Software</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Schulcloud Documentation" class="linkLabel_WmDU">Schulcloud Documentation</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/backend"><span title="Backend" class="categoryLinkLabel_W154">Backend</span></a><button aria-label="Expand sidebar category &#x27;Backend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/frontend"><span title="Frontend" class="categoryLinkLabel_W154">Frontend</span></a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/end-to-end-system-tests"><span title="End-to-end System Tests" class="categoryLinkLabel_W154">End-to-end System Tests</span></a><button aria-label="Expand sidebar category &#x27;End-to-end System Tests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/services"><span title="Services" class="categoryLinkLabel_W154">Services</span></a><button aria-label="Collapse sidebar category &#x27;Services&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/nuxt-client"><span title="Nuxt Client" class="categoryLinkLabel_W154">Nuxt Client</span></a><button aria-label="Expand sidebar category &#x27;Nuxt Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-server"><span title="Schulcloud Server" class="categoryLinkLabel_W154">Schulcloud Server</span></a><button aria-label="Expand sidebar category &#x27;Schulcloud Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/services/collabora/How it works"><span title="Collabora" class="categoryLinkLabel_W154">Collabora</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-client"><span title="Schulcloud Client" class="categoryLinkLabel_W154">Schulcloud Client</span></a><button aria-label="Expand sidebar category &#x27;Schulcloud Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/etherpad"><span title="Etherpad" class="categoryLinkLabel_W154">Etherpad</span></a><button aria-label="Collapse sidebar category &#x27;Etherpad&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/services/etherpad/How it works"><span title="How it works" class="linkLabel_WmDU">How it works</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/services/etherpad/Local setup"><span title="Local Setup" class="linkLabel_WmDU">Local Setup</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/files-storage"><span title="Files Storage" class="categoryLinkLabel_W154">Files Storage</span></a><button aria-label="Expand sidebar category &#x27;Files Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/h5p"><span title="H5P" class="categoryLinkLabel_W154">H5P</span></a><button aria-label="Expand sidebar category &#x27;H5P&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/tldraw-server"><span title="Tldraw Server" class="categoryLinkLabel_W154">Tldraw Server</span></a><button aria-label="Expand sidebar category &#x27;Tldraw Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/category/tsp-synchronisation"><span title="TSP Synchronisation" class="categoryLinkLabel_W154">TSP Synchronisation</span></a><button aria-label="Expand sidebar category &#x27;TSP Synchronisation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/how-to-update-the-docs"><span title="How to update the docs" class="categoryLinkLabel_W154">How to update the docs</span></a><button aria-label="Expand sidebar category &#x27;How to update the docs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/services"><span>Services</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/etherpad"><span>Etherpad</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">How it works</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How it works</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" translate="no">​</a></h2>
<ul>
<li>
<p>FEATURE_ETHERPAD_ENABLED - Used to enable etherpad feature in feathers backend</p>
</li>
<li>
<p>FEATURE_COLUMN_BOARD_COLLABORATIVE_TEXT_EDITOR_ENABLED - Enables etherpad feature on column boards</p>
</li>
<li>
<p>ETHERPAD__COOKIE_EXPIRES_SECONDS - Time in seconds after which a session expires</p>
</li>
<li>
<p>ETHERPAD__COOKIE_RELEASE_THRESHOLD - Time in seconds after which a session is not returned to the user</p>
</li>
<li>
<p>ETHERPAD__API_KEY - Api key used for authentication of schulcloud server requests</p>
</li>
<li>
<p>ETHERPAD__URI - Uri of etherpad api for all calls like create, delete etc. Used as base path for api client in nest and feathers backend.</p>
</li>
<li>
<p>ETHERPAD__PAD_URI - URI to etherpad client api. Used in backend in collaborative text editor and lesson to build return url. Used in legacy client to build url.</p>
</li>
<li>
<p>ETHERPAD__OLD_PAD_URI - Used in feathers backend to restrict access to old etherpad urls to lesson context. Only defined in default.schema.json and not in dof-app-deploy</p>
</li>
<li>
<p>ETHERPAD__PAD_PATH - Path to etherpad client api. Used in legacy client to set path on cookie.</p>
</li>
<li>
<p>ETHERPAD__NEW_DOMAIN - Etherpad Domain. Used in legacy client to validate url</p>
</li>
<li>
<p>ETHERPAD__OLD_DOMAIN - Old Etherpad Domain. Used in legacy client to identify old urls in lessons and transform them to urls with new domain.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-opening-an-etherpad-element-on-a-column-board">Creating and Opening an Etherpad Element on a Column Board<a href="#creating-and-opening-an-etherpad-element-on-a-column-board" class="hash-link" aria-label="Direct link to Creating and Opening an Etherpad Element on a Column Board" title="Direct link to Creating and Opening an Etherpad Element on a Column Board" translate="no">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Requests of etherpad creation" src="/assets/images/how_it_works-5ce97ed02f4c54237f64f270244a59f0.png" width="1251" height="805" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-etherpad-element">Creating an Etherpad Element<a href="#creating-an-etherpad-element" class="hash-link" aria-label="Direct link to Creating an Etherpad Element" title="Direct link to Creating an Etherpad Element" translate="no">​</a></h3>
<ol>
<li>The user initiates the process by creating an Etherpad element on a column board.</li>
<li>Vue then sends a request to the board module in the Schulcloud server for a new Etherpad element.</li>
<li>The server responds by returning an Etherpad element which is then displayed on the board.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interacting-with-the-etherpad-element">Interacting with the Etherpad Element<a href="#interacting-with-the-etherpad-element" class="hash-link" aria-label="Direct link to Interacting with the Etherpad Element" title="Direct link to Interacting with the Etherpad Element" translate="no">​</a></h3>
<ol>
<li>When the user clicks on the Etherpad element, the Vue client sends a request to the collaborative text editor module in the Schulcloud server for a new Etherpad.</li>
<li>The Schulcloud server is capable of creating Etherpads based on parent types. The parent type is further used for handling authorisation of the etherpad. Currently, the only parent type is a column board element.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grouping-and-creating-etherpads">Grouping and Creating Etherpads<a href="#grouping-and-creating-etherpads" class="hash-link" aria-label="Direct link to Grouping and Creating Etherpads" title="Direct link to Grouping and Creating Etherpads" translate="no">​</a></h3>
<ol>
<li>The Schulcloud server first creates a group that clusters several Etherpads together. Each group shares a session and a new group is created for every column board element. This requires sending a request to the Etherpad server.</li>
<li>Once the group is created, the server can send a request to create an Etherpad within that group.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="session-creation-and-cookie-setting">Session Creation and Cookie Setting<a href="#session-creation-and-cookie-setting" class="hash-link" aria-label="Direct link to Session Creation and Cookie Setting" title="Direct link to Session Creation and Cookie Setting" translate="no">​</a></h3>
<ol>
<li>For session creation, the server first needs to request an Etherpad author and then the session for that author.</li>
<li>With that session, the server can set a session cookie in the client&#x27;s browser and return the Etherpad URL to Vue.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opening-the-etherpad">Opening the Etherpad<a href="#opening-the-etherpad" class="hash-link" aria-label="Direct link to Opening the Etherpad" title="Direct link to Opening the Etherpad" translate="no">​</a></h3>
<p>In the final step, Vue opens the Etherpad URL in a new browser tab, enabling the user to interact directly with the Etherpad. It&#x27;s important to note that the Etherpad client interface displayed to the user is served by the Etherpad server, and as such, it is not a part of our own codebase.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="etherpad-adapter">Etherpad Adapter<a href="#etherpad-adapter" class="hash-link" aria-label="Direct link to Etherpad Adapter" title="Direct link to Etherpad Adapter" translate="no">​</a></h2>
<p>For the communication with the Etherpad server, the Schulcloud server uses an adapter. This adapter is responsible for handling all requests to the Etherpad server and ensuring that the correct data is sent and received. This adapter uses a client that is generated by open api generator. Client generation can be triggered with <code>generate-client:etherpad</code> and should be executed after update of etherpad server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" translate="no">​</a></h2>
<p>The authentication process in our system works via a token. This token is sent with each request as a parameter to ensure secure communication.</p>
<p>The token is defined by the <code>ETHERPAD_API_KEY</code> environment variable. This variable holds the key used for authentication, ensuring that only authorized requests are processed.</p>
<p>In the Schulcloud server, this API key is passed to the etherpad adapter on its initialization in the collaborative text editor module.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="session-managment">Session managment<a href="#session-managment" class="hash-link" aria-label="Direct link to Session managment" title="Direct link to Session managment" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="etherpad-session-creation-and-expiration">Etherpad Session Creation and Expiration<a href="#etherpad-session-creation-and-expiration" class="hash-link" aria-label="Direct link to Etherpad Session Creation and Expiration" title="Direct link to Etherpad Session Creation and Expiration" translate="no">​</a></h3>
<p>Each interaction with an Etherpad element initiates the creation of a new session. The lifespan of this session is determined by the <code>ETHERPAD_COOKIE__EXPIRES_SECONDS</code> environment variable. Once this time period elapses, the user loses access to the pad. This loss of access is indicated by the display of a non-translated English message: &quot;You do not have permission to access this pad.&quot; However, even after the session expires, users can still view the pad content as long as they do not interact with it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="session-reuse">Session Reuse<a href="#session-reuse" class="hash-link" aria-label="Direct link to Session Reuse" title="Direct link to Session Reuse" translate="no">​</a></h3>
<p>Upon subsequent interactions with the Etherpad element, an existing session for that element may be reused. Whether an old session is reused or a new one is created depends on the environment variable settings. The <code>ETHERPAD_COOKIE_RELEASE_THRESHOLD</code> variable determines the remaining validity period of a session for it to be delivered to the user. In the current production environment, both <code>ETHERPAD_COOKIE_RELEASE_THRESHOLD</code> and <code>ETHERPAD_COOKIE__EXPIRES_SECONDS</code> are set to the same value of 2 hours. This configuration results in the creation of a new session for each interaction with an Etherpad element.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="session-renewal">Session Renewal<a href="#session-renewal" class="hash-link" aria-label="Direct link to Session Renewal" title="Direct link to Session Renewal" translate="no">​</a></h3>
<p>Currently there is no automatic session renewal upon interaction. Etherpad provides the <code>COOKIE_SESSION_REFRESH_INTERVAL</code> configuration variable, which specifies the time period after which a user&#x27;s session is automatically renewed in an open tab. However, this variable is currently unset, and the default value of 1 day has no effect because it exceeds the <code>ETHERPAD_COOKIE__EXPIRES_SECONDS</code> value. Therefore, sessions are not automatically renewed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="session-removal">Session Removal<a href="#session-removal" class="hash-link" aria-label="Direct link to Session Removal" title="Direct link to Session Removal" translate="no">​</a></h3>
<p>When a user logs out of Schulcloud, all sessions are terminated, and the user loses access to the pads upon interaction. However, Etherpad sessions are not automatically removed upon user auto-logout in Schulcloud. As long as <code>ETHERPAD_COOKIE__EXPIRES_SECONDS</code> and <code>JWT_TIMEOUT_SECONDS</code> are set to the same value, all sessions should theoretically become invalid after auto-logout.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cookie-management">Cookie Management<a href="#cookie-management" class="hash-link" aria-label="Direct link to Cookie Management" title="Direct link to Cookie Management" translate="no">​</a></h3>
<p>A cookie named sessionID is stored for each session. These cookies are not programmatically removed after the <code>ETHERPAD_COOKIE__EXPIRES_SECONDS</code> period or upon Schulcloud logout.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-topics">Legacy Topics<a href="#legacy-topics" class="hash-link" aria-label="Direct link to Legacy Topics" title="Direct link to Legacy Topics" translate="no">​</a></h3>
<p>Same session behavior also applies to legacy code. Env vars are used by both implementations.</p>
<p>In contrast to the nest code in legacy code a session is created for every course and stored as a cookie for every etherpad.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/services/etherpad/How it works.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/etherpad"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Etherpad</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/services/etherpad/Local setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Local Setup</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#creating-and-opening-an-etherpad-element-on-a-column-board" class="table-of-contents__link toc-highlight">Creating and Opening an Etherpad Element on a Column Board</a><ul><li><a href="#creating-an-etherpad-element" class="table-of-contents__link toc-highlight">Creating an Etherpad Element</a></li><li><a href="#interacting-with-the-etherpad-element" class="table-of-contents__link toc-highlight">Interacting with the Etherpad Element</a></li><li><a href="#grouping-and-creating-etherpads" class="table-of-contents__link toc-highlight">Grouping and Creating Etherpads</a></li><li><a href="#session-creation-and-cookie-setting" class="table-of-contents__link toc-highlight">Session Creation and Cookie Setting</a></li><li><a href="#opening-the-etherpad" class="table-of-contents__link toc-highlight">Opening the Etherpad</a></li></ul></li><li><a href="#etherpad-adapter" class="table-of-contents__link toc-highlight">Etherpad Adapter</a></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#session-managment" class="table-of-contents__link toc-highlight">Session managment</a><ul><li><a href="#etherpad-session-creation-and-expiration" class="table-of-contents__link toc-highlight">Etherpad Session Creation and Expiration</a></li><li><a href="#session-reuse" class="table-of-contents__link toc-highlight">Session Reuse</a></li><li><a href="#session-renewal" class="table-of-contents__link toc-highlight">Session Renewal</a></li><li><a href="#session-removal" class="table-of-contents__link toc-highlight">Session Removal</a></li><li><a href="#cookie-management" class="table-of-contents__link toc-highlight">Cookie Management</a></li><li><a href="#legacy-topics" class="table-of-contents__link toc-highlight">Legacy Topics</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-server<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/nuxt-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">nuxt-client<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-client<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/tldraw-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">tldraw-server<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/end-to-end-tests" target="_blank" rel="noopener noreferrer" class="footer__link-item">end-to-end-tests<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>