<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/collabora/How it works" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">How it works | Schulcloud-Verbund-Software Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://documentation.dbildungscloud.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://documentation.dbildungscloud.dev/docs/services/collabora/How it works"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How it works | Schulcloud-Verbund-Software Documentation"><meta data-rh="true" name="description" content="Collabora is an online office suite that enables collaborative editing of documents, spreadsheets, and presentations directly in the browser. It integrates with Schulcloud to provide users with online and real-time editing capabilities. Office documents are displayed on the column board as collabora styled elements."><meta data-rh="true" property="og:description" content="Collabora is an online office suite that enables collaborative editing of documents, spreadsheets, and presentations directly in the browser. It integrates with Schulcloud to provide users with online and real-time editing capabilities. Office documents are displayed on the column board as collabora styled elements."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://documentation.dbildungscloud.dev/docs/services/collabora/How it works"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/collabora/How it works" hreflang="en"><link data-rh="true" rel="alternate" href="https://documentation.dbildungscloud.dev/docs/services/collabora/How it works" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Services","item":"https://documentation.dbildungscloud.dev/docs/category/services"},{"@type":"ListItem","position":2,"name":"How it works","item":"https://documentation.dbildungscloud.dev/docs/services/collabora/How it works"}]}</script><link rel="stylesheet" href="/assets/css/styles.8215794b.css">
<script src="/assets/js/runtime~main.34e62249.js" defer="defer"></script>
<script src="/assets/js/main.e32fe6dc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Schulcloud-Verbund-Software</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Schulcloud Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/backend">Backend</a><button aria-label="Expand sidebar category &#x27;Backend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/frontend">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/end-to-end-system-tests">End-to-end System Tests</a><button aria-label="Expand sidebar category &#x27;End-to-end System Tests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/services">Services</a><button aria-label="Collapse sidebar category &#x27;Services&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/nuxt-client">Nuxt Client</a><button aria-label="Expand sidebar category &#x27;Nuxt Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-server">Schulcloud Server</a><button aria-label="Expand sidebar category &#x27;Schulcloud Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/services/collabora/How it works">Collabora</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/services/collabora/How it works">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/services/collabora/Local setup">Local setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/services/collabora/Technical details">Technical details</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/schulcloud-client">Schulcloud Client</a><button aria-label="Expand sidebar category &#x27;Schulcloud Client&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/etherpad">Etherpad</a><button aria-label="Expand sidebar category &#x27;Etherpad&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/files-storage">Files Storage</a><button aria-label="Expand sidebar category &#x27;Files Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/h5p">H5P</a><button aria-label="Expand sidebar category &#x27;H5P&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/tldraw-server">Tldraw Server</a><button aria-label="Expand sidebar category &#x27;Tldraw Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/tsp-synchronisation">TSP Synchronisation</a><button aria-label="Expand sidebar category &#x27;TSP Synchronisation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/how-to-update-the-docs">How to update the docs</a><button aria-label="Expand sidebar category &#x27;How to update the docs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/services"><span>Services</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Collabora</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">How it works</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How it works</h1></header>
<p>Collabora is an online office suite that enables collaborative editing of documents, spreadsheets, and presentations directly in the browser. It integrates with Schulcloud to provide users with online and real-time editing capabilities. Office documents are displayed on the column board as collabora styled elements.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-components">System components<a href="#system-components" class="hash-link" aria-label="Direct link to System components" title="Direct link to System components">​</a></h2>
<p>The Collabora integration in Schulcloud consists of several key system components:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vue-client">Vue Client<a href="#vue-client" class="hash-link" aria-label="Direct link to Vue Client" title="Direct link to Vue Client">​</a></h3>
<p>The Vue client is responsible for displaying Collabora office documents in an iframe. It requests an authorized Collabora document URL from the file storage API, adds user and locale information, and embeds the document for editing or viewing. On mount, it sets up postMessage communication between the iframe and the parent Vue app to enable and disable collabora features. This component acts as the user interface bridge between Schulcloud and Collabora.</p>
<p>The File Element component of the Vue client maps board permissions to Collabora&#x27;s view and edit modes. This ensures that users with edit rights can modify documents, while others are restricted to view-only mode.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="collabora-server">Collabora Server<a href="#collabora-server" class="hash-link" aria-label="Direct link to Collabora Server" title="Direct link to Collabora Server">​</a></h3>
<p>The Collabora server is deployed as a Docker container using the official Collabora code version. It is responsible for providing the online document editing functionality within the Schulcloud system. The server receives authorized requests from the Vue client, fetches the requested files from the file storage server, and renders the document editor in the browser. It manages collaborative editing sessions, enforces access control using tokens, and ensures that users can view and edit office documents in real time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-in-dof_app_deploy">Configuration in dof_app_deploy<a href="#configuration-in-dof_app_deploy" class="hash-link" aria-label="Direct link to Configuration in dof_app_deploy" title="Direct link to Configuration in dof_app_deploy">​</a></h4>
<p>The Collabora server is configured in the <code>dof_app_deploy</code> repository using specific parameters to control its behavior and performance:</p>
<ul>
<li><code>--o:ssl.enable=false</code>: Disables SSL within the Collabora server (SSL termination is handled externally).</li>
<li><code>--o:ssl.termination=true</code>: Enables SSL termination, allowing secure connections to be handled by a reverse proxy or load balancer.</li>
<li><code>--o:num_prespawn_children=4</code>: Sets the number of pre-spawned child processes to 4, improving responsiveness for concurrent users.</li>
<li><code>--o:per_document.bgsave_timeout_secs=600</code>: Sets the background save timeout for each document to 600 seconds (10 minutes).</li>
<li><code>--o:net.connection_timeout_secs=600</code>: Sets the network connection timeout to 600 seconds, allowing longer-running connections without interruption.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-storage-server">File Storage server<a href="#file-storage-server" class="hash-link" aria-label="Direct link to File Storage server" title="Direct link to File Storage server">​</a></h3>
<p>The File Storage server acts as a central integration point between Schulcloud, Collabora Online, and the underlying storage backend. It exposes WOPI endpoints that enable real-time document collaboration. Its main responsibilities include:</p>
<ul>
<li>
<p><strong>Access Control &amp; Authorization:</strong> Validates user permissions and generates secure access tokens, ensuring only authorized users can view or edit documents through Collabora. Coordinates with Schulcloud&#x27;s authorization services for token validation.</p>
</li>
<li>
<p><strong>File Metadata &amp; Status:</strong> Provides Collabora with essential metadata (such as file name, size, and permissions) via endpoints like <code>CheckFileInfo</code>, allowing Collabora to correctly display and manage documents.</p>
</li>
<li>
<p><strong>File Content Streaming:</strong> Streams file contents to Collabora for viewing or editing (<code>GetFile</code> endpoint), and receives updated file contents from Collabora to save back to the storage system (<code>PutFile</code> endpoint).</p>
</li>
<li>
<p><strong>Feature Enablement &amp; Security:</strong> Checks if Collabora integration is enabled for a given file and ensures files are safe to access (e.g., not blocked due to viruses or unsupported formats).</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="schulcloud-server">Schulcloud Server<a href="#schulcloud-server" class="hash-link" aria-label="Direct link to Schulcloud Server" title="Direct link to Schulcloud Server">​</a></h3>
<p>The Schulcloud server acts as the central authentication and authorization service within the system. It validates user identities, manages access permissions, and issues secure tokens that allow users to interact with Collabora and the File Storage server. The Schulcloud server ensures that only authorized users can access or edit documents.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configs">Configs<a href="#configs" class="hash-link" aria-label="Direct link to Configs" title="Direct link to Configs">​</a></h2>
<p><code>FEATURE_COLUMN_BOARD_COLLABORA_ENABLED</code> enables Collabora Feature in Vue client and File Storage server.</p>
<p><code>COLLABORA_MAX_FILE_SIZE_IN_BYTES</code> sets the maximum allowed file size for documents to be opened and edited with Collabora. If a file exceeds this limit, it cannot be opened in the Collabora editor, but it can still be saved to the storage system.</p>
<p><code>WOPI_URL</code> sets the origin of the wopi endpoint for the collabora server.</p>
<p><code>WOPI_POST_MESSAGE_ORIGIN</code> sets the domain the collabora server page sends/receives PostMessages from, we only listen to messages from this domain. PostMessage communication is used in collabora page in vue client.</p>
<p><code>WOPI_TOKEN_TTL_IN_SECONDS</code> sets the time-to-live (TTL) for WOPI access tokens in seconds. This determines how long a token remains valid for accessing documents via Collabora.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to Workflow" title="Direct link to Workflow">​</a></h2>
<p>The workflow describes how the different system components interact when opening a document on the column boord:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opening-a-document">Opening a document<a href="#opening-a-document" class="hash-link" aria-label="Direct link to Opening a document" title="Direct link to Opening a document">​</a></h3>
<ol>
<li>User clicks on an office document on the board.</li>
<li>A new browser tab opens, displaying a Vue page with an embedded iframe.</li>
<li>When the Vue page mounts, it requests an authorized Collabora URL from the file storage server.</li>
<li>The file storage server requests an authorization token from the Schulcloud server.</li>
<li>The file storage server queries the Collabora server to discover the URL of the responsible Collabora instance in the cluster.</li>
<li>The file storage server combines the token and Collabora URL, then returns them to the Vue page.</li>
<li>The Vue page loads the Collabora URL in the iframe, initiating a request to the Collabora server.</li>
<li>The Collabora server requests the document file with the token from the file storage server.</li>
<li>The file storage server validates the authorization token with the Schulcloud server.</li>
<li>The file storage server responds with the requested file.</li>
<li>The Collabora server renders the editor with the document data inside the iFrame of the Vue page.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Collabora workflow" src="/assets/images/how_it_works-3f09625141f7db3211e9fe58fb24255f.png" width="3157" height="1336" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hpi-schul-cloud/hpi-schul-cloud.github.io/blob/main/docs/services/collabora/How it works.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/services/schulcloud-server/our nextjs modules/room-member-module"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Room Member Module</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/services/collabora/Local setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Local setup</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-components" class="table-of-contents__link toc-highlight">System components</a><ul><li><a href="#vue-client" class="table-of-contents__link toc-highlight">Vue Client</a></li><li><a href="#collabora-server" class="table-of-contents__link toc-highlight">Collabora Server</a></li><li><a href="#file-storage-server" class="table-of-contents__link toc-highlight">File Storage server</a></li><li><a href="#schulcloud-server" class="table-of-contents__link toc-highlight">Schulcloud Server</a></li></ul></li><li><a href="#configs" class="table-of-contents__link toc-highlight">Configs</a></li><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a><ul><li><a href="#opening-a-document" class="table-of-contents__link toc-highlight">Opening a document</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-server<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/nuxt-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">nuxt-client<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/schulcloud-client" target="_blank" rel="noopener noreferrer" class="footer__link-item">schulcloud-client<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/tldraw-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">tldraw-server<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hpi-schul-cloud/end-to-end-tests" target="_blank" rel="noopener noreferrer" class="footer__link-item">end-to-end-tests<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>